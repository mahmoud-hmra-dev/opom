"use strict";(self.webpackChunkworklenz=self.webpackChunkworklenz||[]).push([[940],{94940:(k,r,o)=>{o.r(r),o.d(r,{NotificationSettingsModule:()=>Z});var C=o(96814),c=o(52787),g=o(15861),n=o(65879),z=o(90586),y=o(16849),v=o(85080),u=o(82962),h=o(24139),p=o(62612),f=o(8083),m=o(66987);const _=function(){return{rows:6}},S=[{path:"",component:(()=>{var i;class l{constructor(t,e,a,s){this.app=t,this.api=e,this.settingsService=a,this.ngZone=s,this.loading=!1,this.updating=!1,this.model={},this.app.setTitle("Notification Settings")}ngOnInit(){this.get()}get(){var t=this;return(0,g.Z)(function*(){try{t.loading=!0;const e=yield t.api.getNotificationSettings();e.done&&(t.model=e.body),t.loading=!1}catch{t.loading=!1}})()}update(){var t=this;return(0,g.Z)(function*(){try{t.updating=!0;const e=yield t.api.updateNotificationSettings(t.model);e.done&&(t.model=e.body,t.settingsService.settings=e.body),t.updating=!1}catch{t.updating=!1}})()}updateSettings(){this.updating||this.update()}requestPermissions(){this.model.popup_notifications_enabled&&"default"===Notification.permission&&this.askNotificationPermission()}askNotificationPermission(){this.ngZone.runOutsideAngular(()=>{"Notification"in window?Notification.requestPermission():console.log("This browser does not support notifications.")})}}return(i=l).\u0275fac=function(t){return new(t||i)(n.Y36(z.z),n.Y36(y.G),n.Y36(v.g),n.Y36(n.R0b))},i.\u0275cmp=n.Xpm({type:i,selectors:[["worklenz-notification-settings"]],decls:29,vars:8,consts:[[3,"nzActive","nzLoading","nzParagraph"],["nz-checkbox","",1,"d-flex","align-items-baseline","mb-2",3,"nzChecked","nzCheckedChange"],["nz-typography","",1,"mb-0"],["nz-typography","","nzType","secondary",1,"mb-0"],[1,"my-3"]],template:function(t,e){1&t&&(n.TgZ(0,"nz-card")(1,"nz-skeleton",0),n.ynx(2),n.TgZ(3,"label",1),n.NdJ("nzCheckedChange",function(s){return e.model.email_notifications_enabled=s})("nzCheckedChange",function(){return e.updateSettings()}),n.TgZ(4,"h4",2),n._uU(5,"Send me email notifications"),n.qZA()(),n.TgZ(6,"p",3),n._uU(7," This includes new task assignments. "),n.qZA(),n._UZ(8,"nz-divider",4),n.BQk(),n.ynx(9),n.TgZ(10,"label",1),n.NdJ("nzCheckedChange",function(s){return e.model.daily_digest_enabled=s})("nzCheckedChange",function(){return e.updateSettings()}),n.TgZ(11,"h4",2),n._uU(12,"Send me a daily digest"),n.qZA()(),n.TgZ(13,"p",3),n._uU(14," Every evening, you will receive a summary of recent activity in tasks. "),n.qZA(),n._UZ(15,"nz-divider",4),n.BQk(),n.ynx(16),n.TgZ(17,"label",1),n.NdJ("nzCheckedChange",function(s){return e.model.popup_notifications_enabled=s})("nzCheckedChange",function(){return e.updateSettings(),e.requestPermissions()}),n.TgZ(18,"h4",2),n._uU(19,"Pop up notifications on my computer when opom is open"),n.qZA()(),n.TgZ(20,"p",3),n._uU(21," Pop up notifications can be disabled by your browser. Change your browser settings to allow them. "),n.qZA(),n._UZ(22,"nz-divider",4),n.BQk(),n.ynx(23),n.TgZ(24,"label",1),n.NdJ("nzCheckedChange",function(s){return e.model.show_unread_items_count=s})("nzCheckedChange",function(){return e.updateSettings()}),n.TgZ(25,"h4",2),n._uU(26,"Show the number of unread items"),n.qZA()(),n.TgZ(27,"p",3),n._uU(28," You\u2019ll see counts for each notification. "),n.qZA(),n.BQk(),n.qZA()()),2&t&&(n.xp6(1),n.Q6J("nzActive",!0)("nzLoading",e.loading)("nzParagraph",n.DdM(7,_)),n.xp6(2),n.Q6J("nzChecked",e.model.email_notifications_enabled),n.xp6(7),n.Q6J("nzChecked",e.model.daily_digest_enabled),n.xp6(7),n.Q6J("nzChecked",e.model.popup_notifications_enabled),n.xp6(7),n.Q6J("nzChecked",e.model.show_unread_items_count))},dependencies:[u.bd,h.ng,p.Ie,f.ZU,m.g],styles:["h4[_ngcontent-%COMP%]{position:relative;top:2px}label[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none}"]}),l})()}];let N=(()=>{var i;class l{}return(i=l).\u0275fac=function(t){return new(t||i)},i.\u0275mod=n.oAB({type:i}),i.\u0275inj=n.cJS({imports:[c.Bz.forChild(S),c.Bz]}),l})(),Z=(()=>{var i;class l{}return(i=l).\u0275fac=function(t){return new(t||i)},i.\u0275mod=n.oAB({type:i}),i.\u0275inj=n.cJS({imports:[C.ez,N,u.vh,h.H0,p.Wr,f.ZJ,m.S]}),l})()}}]);