"use strict";(self.webpackChunkworklenz=self.webpackChunkworklenz||[]).push([[226],{63106:(G,w,r)=>{r.d(w,{I:()=>V});var e=r(65879),M=r(26254),C=r(62595),A=r(92574),S=r(42840),x=r(96814),D=r(60095),Z=r(62612),k=r(62787),m=r(21406),f=r(52682),t=r(3599),H=r(16676),_=r.n(H),R=r(42012),O=r(70855),Y=r(41958),v=r(73460);function J(l,p){if(1&l){const d=e.EpF();e.TgZ(0,"button",13)(1,"label",14),e.NdJ("ngModelChange",function(u){e.CHM(d);const z=e.oxw(2);return e.KtG(z.includeArchived=u)})("ngModelChange",function(u){e.CHM(d);const z=e.oxw(2);return e.KtG(z.onArchiveChange(u))}),e._uU(2," Include Archived Projects "),e.qZA()()}if(2&l){const d=e.oxw(2);e.Q6J("ngClass",d.includeArchived?"archived":""),e.xp6(1),e.Q6J("ngModel",d.includeArchived)}}function y(l,p){if(1&l&&(e.ynx(0),e.YNc(1,J,3,2,"button",12),e.BQk()),2&l){const d=e.oxw();e.xp6(1),e.Q6J("ngIf",d.showArchivedToggle)}}function b(l,p){if(1&l&&(e.TgZ(0,"button",17),e._uU(1),e._UZ(2,"span",18),e.qZA()),2&l){const d=e.oxw(3),g=e.MAs(9);e.Q6J("nzDropdownMenu",g)("nzTrigger","click")("nzPlacement","bottomRight"),e.xp6(1),e.hij(" ",d.durationLabel," "),e.xp6(1),e.Q6J("nzType","down")}}function E(l,p){1&l&&(e.ynx(0),e.TgZ(1,"nz-space"),e.YNc(2,b,3,5,"button",16),e.qZA(),e.BQk())}function I(l,p){if(1&l&&(e.TgZ(0,"button",23),e._uU(1," Export "),e._UZ(2,"span",18),e.qZA()),2&l){e.oxw();const d=e.MAs(3),g=e.oxw(2);e.Q6J("nzType","primary")("nzLoading",g.exporting)("nzTrigger","click")("nzDropdownMenu",d)("nzPlacement","bottomRight"),e.xp6(2),e.Q6J("nzType","down")}}function Q(l,p){if(1&l){const d=e.EpF();e.TgZ(0,"li",24),e.NdJ("click",function(){e.CHM(d);const u=e.oxw(3);return e.KtG(u.export())}),e._uU(1,"Excel"),e.qZA()}}function W(l,p){if(1&l){const d=e.EpF();e.TgZ(0,"li",24),e.NdJ("click",function(){e.CHM(d);const u=e.oxw(3);return e.KtG(u.export())}),e._uU(1,"PNG"),e.qZA()}}function F(l,p){if(1&l&&(e.ynx(0),e.YNc(1,I,3,6,"button",19),e.TgZ(2,"nz-dropdown-menu",null,20)(4,"ul",21),e.YNc(5,Q,2,0,"li",22),e.YNc(6,W,2,0,"li",22),e.qZA()(),e.BQk()),2&l){const d=e.oxw(2);e.xp6(1),e.Q6J("ngIf",d.showExport),e.xp6(4),e.Q6J("ngIf",!d.isPngOnly),e.xp6(1),e.Q6J("ngIf",d.isPngOnly)}}function L(l,p){if(1&l&&(e.ynx(0),e.YNc(1,E,3,0,"ng-container",15),e.YNc(2,F,7,3,"ng-container",2),e.BQk()),2&l){const d=e.oxw();e.xp6(1),e.Q6J("ngIf",d.showDuration)}}function U(l,p){if(1&l){const d=e.EpF();e.TgZ(0,"li",25),e.NdJ("click",function(){const z=e.CHM(d).$implicit,j=e.oxw();return e.KtG(j.onDurationChange(z))}),e._uU(1),e.TgZ(2,"small",26),e._uU(3),e.qZA()()}if(2&l){const d=p.$implicit,g=e.oxw();e.Q6J("nzSelected",d.key===(null==g.selectedDuration?null:g.selectedDuration.key)&&!g.dateRange.length),e.xp6(1),e.hij(" ",d.label," "),e.xp6(2),e.hij(" ",d.dates,"")}}const N=function(){return{standalone:!0}};let V=(()=>{var l;class p{get durationLabel(){const g="yy-MM-DD";return 2==this.dateRange.length?`${_()(this.dateRange[0]).format(g)} - ${_()(this.dateRange[1]).format(g)}`:this.selectedDuration?this.selectedDuration.label:"Duration"}get selectedDuration(){return this.api.getDuration()}constructor(g){this.api=g,this.showExport=!0,this.showDuration=!0,this.showArchivedToggle=!0,this.isPngOnly=!1,this.durationChanged=new e.vpe,this.exportFile=new e.vpe,this.isDurationLabelSelected=new e.vpe,this.includeArchived=!1,this.exporting=!1,this.dateRange=[],this.durations=[{label:"Yesterday",key:m.WD,dates:_()().subtract(1,"days").format("MMM,DD YYYY").toString()},{label:"Last 7 days",key:m.ao,dates:_()().subtract(1,"weeks").format("MMM,DD YYYY").toString()+" - "+_()().format("MMM,DD YYYY").toString()},{label:"Last week",key:m.$U,dates:_()().subtract(1,"weeks").startOf("week").format("MMM,DD YYYY").toString()+" - "+_()().subtract(1,"weeks").endOf("week").format("MMM,DD YYYY").toString()},{label:"Last 30 days",key:m.ly,dates:_()().subtract(1,"month").format("MMM,DD YYYY").toString()+" - "+_()().format("MMM,DD YYYY").toString()},{label:"Last month",key:m.lI,dates:_()().subtract(1,"month").startOf("month").format("MMM,DD YYYY").toString()+" - "+_()().subtract(1,"month").endOf("month").format("MMM,DD YYYY").toString()},{label:"Last 3 months",key:m.o9,dates:_()().subtract(3,"months").format("MMM,DD YYYY").toString()+" - "+_()().format("MMM,DD YYYY").toString()},{label:"All time",key:m.Si,dates:""}]}ngOnInit(){this.setInitialValues()}setInitialValues(){this.api.getDuration()||this.api.setDuration(this.durations.find(g=>g.key===m.ao)||null),this.api.getIncludeToggle()&&(this.includeArchived=this.api.getIncludeToggle())}onArchiveChange(g){this.api.setIncludeToggle(g),this.api.emitIncludeToggleChanged()}onDurationChange(g){this.isDurationLabelSelected.emit(!0),setTimeout(()=>{this.api.setDuration(g),this.api.setDrawerDuration(g),this.dateRange=[],this.api.setDateRange(this.dateRange),this.api.setDrawerDateRange(this.dateRange),this.api.emitDurationChanged()},500)}customDateChange(){this.isDurationLabelSelected.emit(!1),setTimeout(()=>{this.api.setDateRange(this.dateRange),this.api.setDrawerDateRange(this.dateRange),this.api.emitDateRangeChanged()})}export(){this.exportFile.emit()}}return(l=p).\u0275fac=function(g){return new(g||l)(e.Y36(R.m))},l.\u0275cmp=e.Xpm({type:l,selectors:[["worklenz-rpt-header"]],inputs:{title:"title",showExport:"showExport",showDuration:"showDuration",showArchivedToggle:"showArchivedToggle",isPngOnly:"isPngOnly"},outputs:{durationChanged:"durationChanged",exportFile:"exportFile",isDurationLabelSelected:"isDurationLabelSelected"},standalone:!0,features:[e.jDz],decls:21,vars:8,consts:[[1,"site-page-header-ghost-wrapper"],[1,"px-0",3,"nzGhost"],[4,"nzSpaceItem"],["timeSelector","nzDropdownMenu"],["nz-menu","","nzSelectable","",2,"max-height","330px","overflow-y","auto"],["nz-menu-item","",3,"nzSelected","click",4,"ngFor","ngForOf"],["nz-menu-divider",""],[1,"px-2","pb-2","pt-2","mt-1","custom-dropdown-range-li"],["nz-form",""],[1,"d-block","mt-1"],[1,"w-100",3,"ngModel","ngModelOptions","ngModelChange"],["nz-button","",1,"mt-2","ms-auto","d-block",3,"nzType","nzSize","click"],["nz-button","",3,"ngClass",4,"ngIf"],["nz-button","",3,"ngClass"],["nz-checkbox","",3,"ngModel","ngModelChange"],[4,"ngIf"],["nz-button","","nz-dropdown","",3,"nzDropdownMenu","nzTrigger","nzPlacement",4,"nzSpaceItem"],["nz-button","","nz-dropdown","",3,"nzDropdownMenu","nzTrigger","nzPlacement"],["nz-icon","",3,"nzType"],["nz-button","","nz-dropdown","",3,"nzType","nzLoading","nzTrigger","nzDropdownMenu","nzPlacement",4,"ngIf"],["exportMenu","nzDropdownMenu"],["nz-menu",""],["nz-menu-item","",3,"click",4,"ngIf"],["nz-button","","nz-dropdown","",3,"nzType","nzLoading","nzTrigger","nzDropdownMenu","nzPlacement"],["nz-menu-item","",3,"click"],["nz-menu-item","",3,"nzSelected","click"],[1,"ms-auto","text-secondary"]],template:function(g,u){1&g&&(e.TgZ(0,"div",0)(1,"nz-page-header",1)(2,"nz-page-header-title"),e._uU(3),e.qZA(),e.TgZ(4,"nz-page-header-extra")(5,"nz-space"),e.YNc(6,y,2,1,"ng-container",2),e.YNc(7,L,3,1,"ng-container",2),e.qZA()()()(),e.TgZ(8,"nz-dropdown-menu",null,3)(10,"ul",4),e.YNc(11,U,4,3,"li",5),e._UZ(12,"li",6),e.TgZ(13,"li",7)(14,"form",8)(15,"label"),e._uU(16,"Custom range"),e.qZA(),e.TgZ(17,"div",9)(18,"nz-range-picker",10),e.NdJ("ngModelChange",function(j){return u.dateRange=j}),e.qZA()(),e.TgZ(19,"button",11),e.NdJ("click",function(){return u.customDateChange()}),e._uU(20," Filter "),e.qZA()()()()()),2&g&&(e.xp6(1),e.Q6J("nzGhost",!1),e.xp6(2),e.Oqu(u.title),e.xp6(8),e.Q6J("ngForOf",u.durations),e.xp6(7),e.Q6J("ngModel",u.dateRange)("ngModelOptions",e.DdM(7,N)),e.xp6(1),e.Q6J("nzType","primary")("nzSize","small"))},dependencies:[M.KJ,M.$O,M.u9,M.Jp,C.PV,C.Ls,A.zf,A.NU,A.$1,S.sL,S.ix,O.w,Y.dQ,x.mk,D.u5,D._Y,D.JJ,D.JL,D.On,D.F,Z.Wr,Z.Ie,k.b1,v.wO,v.r9,v.YV,k.cm,k.RR,k.wA,x.sg,f.Hb,f.uw,f.wS,t.U5,t.Lr,x.O5],changeDetection:0}),p})()},55226:(G,w,r)=>{r.r(w),r.d(w,{RptTimeEstimationVsActualModule:()=>st});var e=r(96814),M=r(52787),C=r(15861),A=r(47246),S=r(17816),x=r(69649),D=r(63019),Z=r(71993),k=r(16676),m=r.n(k),f=r(21406),t=r(65879),H=r(42012),_=r(16196),R=r(63106),O=r(33410),Y=r(82962),v=r(92574),J=r(20824),y=r(60095),b=r(73460),E=r(62787),I=r(42840),Q=r(70855),W=r(41958),F=r(62612),L=r(62595),U=r(8083),N=r(60804),V=r(22114),l=r(96109),p=r(33640),d=r(9172);const g=["chartContainer"],u=["exportChartCanvas"];function z(i,h){if(1&i&&(t.TgZ(0,"button",22),t._uU(1," Teams "),t._UZ(2,"span",23),t.qZA()),2&i){const c=t.oxw(2),n=t.MAs(10);t.Q6J("nzDropdownMenu",n)("nzClickHide",!1)("nzLoading",c.loadingTeams)("nzTrigger","click")}}function j(i,h){if(1&i&&(t.TgZ(0,"button",22),t._uU(1," Categories "),t._UZ(2,"span",23),t.qZA()),2&i){const c=t.oxw(2),n=t.MAs(32);t.Q6J("nzDropdownMenu",n)("nzClickHide",!1)("nzLoading",c.loadingCategories)("nzTrigger","click")}}function $(i,h){if(1&i&&(t.TgZ(0,"button",22),t._uU(1," Projects "),t._UZ(2,"span",23),t.qZA()),2&i){const c=t.oxw(2),n=t.MAs(21);t.Q6J("nzDropdownMenu",n)("nzClickHide",!1)("nzLoading",c.loadingProjects)("nzTrigger","click")}}function X(i,h){1&i&&(t.TgZ(0,"nz-space"),t.YNc(1,z,3,4,"button",21),t.YNc(2,j,3,4,"button",21),t.YNc(3,$,3,4,"button",21),t.qZA())}function q(i,h){if(1&i&&(t.TgZ(0,"div",24)(1,"div",25)(2,"div",26,27),t._UZ(4,"canvas",28,29),t.qZA()()()),2&i){const c=t.oxw();t.Udp("height",c.chartHeight+"px"),t.xp6(2),t.Udp("height",c.chartHeight+"px")("width",c.chartWidth+"px"),t.xp6(2),t.Q6J("data",c.barChartData)("options",c.barChartOptions)("plugins",c.barChartPlugins)("legend",!1)("type","bar")}}function tt(i,h){1&i&&t._UZ(0,"nz-empty")}function et(i,h){if(1&i){const c=t.EpF();t.TgZ(0,"nz-segmented",30),t.NdJ("nzValueChange",function(o){t.CHM(c);const a=t.oxw();return t.KtG(a.handleIndexChange(o))}),t.qZA()}if(2&i){const c=t.oxw();t.Q6J("nzOptions",c.toggleOptions)("nzTooltipTitle","The adjustment of values such as man-days and working days can be done through the project settings.")}}function nt(i,h){if(1&i){const c=t.EpF();t.TgZ(0,"li",11),t.NdJ("nzCheckedChange",function(o){const s=t.CHM(c).$implicit;return t.KtG(s.selected=o)})("nzCheckedChange",function(){t.CHM(c);const o=t.oxw();return t.KtG(o.checkTeam())}),t._uU(1),t.qZA()}if(2&i){const c=h.$implicit;t.Q6J("nzChecked",c.selected),t.xp6(1),t.hij(" ",c.name," ")}}function ot(i,h){if(1&i){const c=t.EpF();t.TgZ(0,"li",11),t.NdJ("nzCheckedChange",function(o){const s=t.CHM(c).$implicit;return t.KtG(s.selected=o)})("nzCheckedChange",function(){t.CHM(c);const o=t.oxw();return t.KtG(o.checkProject())}),t.TgZ(1,"div",31)(2,"div")(3,"span",32),t._uU(4),t.qZA()()()()}if(2&i){const c=h.$implicit;t.Q6J("nzChecked",c.selected),t.xp6(4),t.Oqu(c.name)}}function at(i,h){if(1&i){const c=t.EpF();t.TgZ(0,"li",11),t.NdJ("nzCheckedChange",function(o){const s=t.CHM(c).$implicit;return t.KtG(s.selected=o)})("nzCheckedChange",function(){t.CHM(c);const o=t.oxw();return t.KtG(o.checkCategory())}),t.TgZ(1,"div",31)(2,"div")(3,"span",33),t._UZ(4,"nz-badge",34),t.qZA()()()()}if(2&i){const c=h.$implicit;t.Q6J("nzChecked",c.selected),t.xp6(4),t.Q6J("nzColor",c.color_code)("nzText",c.name)}}var B=function(i){return i[i.WORKING_DAYS=0]="WORKING_DAYS",i[i.MAN_DAYS=1]="MAN_DAYS",i}(B||{});const rt=[{path:"",component:(()=>{var i;class h{constructor(n,o,a){this.cdr=n,this.service=o,this.api=a,this.visible=!1,this.loading=!1,this.loadingTeams=!1,this.loadingCategories=!1,this.loadingProjects=!1,this.selectAllTeams=!0,this.selectAllCategories=!0,this.selectAllProjects=!0,this.selectNoCategory=!0,this.isDurationLabelSelected=!0,this.chartHeight=600,this.chartWidth=1080,this.teamSearchText=null,this.categorySearchText=null,this.projectSearchText=null,this.tabTitle="Working Days",this.teamsDropdown=[],this.categoriesDropdown=[],this.projectsDropdown=[],this.barChartPlugins=[],this.projects=[],this.toggleOptions=["Working Days","Man Days"],this.type=0,this.exportChart=null,this.baseChart=null,this.barChartData={labels:[],datasets:[{data:[],label:"Estimated Days ",backgroundColor:"#A5AAD9",barThickness:50},{data:[],label:"Actual Days ",backgroundColor:"#c191cc",barThickness:50}]},this.barChartOptions={maintainAspectRatio:!1,scales:{y:{title:{display:!0,text:"Days",align:"end",font:{family:"Helvetica"}}},x:{title:{display:!0,text:"Project",align:"end",font:{family:"Helvetica"}},ticks:{callback:function(s){return this.getLabelForValue(parseFloat(s)).substr(0,30)}}}},plugins:{tooltip:{callbacks:{footer:s=>{if(s.length>0){const T=this.projects[s[0].dataIndex];if(T.end_date)return"Ends On: "+m()(T.end_date).format("MMM, DD YYYY")}return""}}},datalabels:{color:"white",anchor:"start",align:"start",offset:-30,borderColor:"#000",textStrokeColor:"black",textStrokeWidth:4}}},(0,D.T)(this.service.onDurationChange,this.service.onDateRangeChange,this.service.onIncludeToggleChange).pipe((0,Z.sL)()).subscribe(()=>{this.get()})}ngOnInit(){this.chartHeight=window.innerHeight-300,this.getTeams(),this.cdr.markForCheck()}getTeams(){var n=this;return(0,C.Z)(function*(){try{n.loadingTeams=!0;const o=yield n.api.getOverviewTeams();if(o.done){n.loadingTeams=!1;const a=[];for(const s of o.body)a.push({selected:!0,name:s.name,id:s.id});n.teamsDropdown=a,yield n.refreshCategories(),n.cdr.markForCheck()}}catch(o){(0,x.tu)(o),n.loadingTeams=!1,n.cdr.markForCheck()}})()}getCategories(n){var o=this;return(0,C.Z)(function*(){try{o.loadingCategories=!0;const a=yield o.api.getCategories(n);a.done&&(o.categoriesDropdown=a.body),o.loadingCategories=!1,o.cdr.markForCheck()}catch{o.loadingCategories=!1,o.cdr.markForCheck()}})()}setDatesForKeys(){var n=this;return(0,C.Z)(function*(){if(n.service.getDuration()?.key){const o=n.service.getDuration()?.key,a=m()();switch(o){case f.WD:const s=m()().subtract(1,"days");n.service.setDateRange([s.toString(),s.toString()]);break;case f.ao:const T=m()().subtract(1,"weeks");n.service.setDateRange([T.toString(),a.toString()]);break;case f.ly:const P=m()().subtract(1,"months");n.service.setDateRange([P.toString(),a.toString()]);break;case f.o9:const K=m()().subtract(3,"months");n.service.setDateRange([K.toString(),a.toString()]);break;case f.$U:const ct=m()().subtract(1,"weeks").startOf("week"),lt=m()().subtract(1,"weeks").endOf("week");n.service.setDateRange([ct.toString(),lt.toString()]);break;case f.lI:const dt=m()().subtract(1,"month").startOf("month"),gt=m()().subtract(1,"month").endOf("month");n.service.setDateRange([dt.toString(),gt.toString()])}}})()}get(){var n=this;return(0,C.Z)(function*(){try{n.loading=!0;const o=n.getSelectedTeamIds(),a=n.getSelectedCategories(),s=n.getSelectedProjectIds();n.isDurationLabelSelected&&(yield n.setDatesForKeys());const T={type:B[n.type],teams:o,categories:a,selectNoCategory:n.selectNoCategory,projects:s,duration:n.service.getDuration()?.key,date_range:n.service.getDateRange()},P=yield n.api.getProjectEstimatedVsActual(T,n.service.getIncludeToggle());P.done&&(n.barChartData&&(n.barChartData.datasets[0].data=[],n.barChartData.datasets[1].data=[],n.barChartData.labels=[]),n.loading=!1,n.projects=P.body,n.createChart(),n.cdr.markForCheck()),n.loading=!1,n.cdr.markForCheck()}catch(o){n.loading=!1,(0,x.tu)(o),n.cdr.markForCheck()}})()}ngOnChanges(n){setTimeout(()=>{this.barChart?.update(""),this.cdr.markForCheck()},1e3)}createChart(){this.visible=!0;for(const n of this.projects)this.barChartData.labels?.push(n.name),this.barChartData.datasets[0].data.push(n.estimated_value||0),this.barChartData.datasets[1].data.push(n.value||0);if(this.projects.length){const n=window.innerWidth-300,o=120*this.projects.length;this.chartWidth=o>n?o:window.innerWidth-250}this.barChart?.update("none"),this.createExportChart(),this.cdr.markForCheck()}getSelectedTeamIds(){return this.teamsDropdown.filter(a=>a.selected).map(a=>a.id)||[]}getSelectedCategories(){return this.categoriesDropdown.filter(a=>a.selected).map(a=>a.id)||[]}getSelectedProjectIds(){return this.projectsDropdown.filter(a=>a.selected).map(a=>a.id)||[]}checkTeam(){this.selectAllTeams=!1,this.refreshCategories()}checkCategory(){this.selectAllCategories=!1,this.refreshProjects()}checkProject(){this.selectAllProjects=!1,this.onFilterChange()}refreshCategories(){var n=this;return(0,C.Z)(function*(){yield n.getCategories(n.getSelectedTeamIds()),n.refreshProjects()})()}refreshProjects(){var n=this;return(0,C.Z)(function*(){yield n.getProjects(n.getSelectedTeamIds(),n.getSelectedCategories()),n.get()})()}getProjects(n,o){var a=this;return(0,C.Z)(function*(){try{a.loadingProjects=!0;const s=yield a.api.getAllocationProjects(n,o,a.selectNoCategory);s.done&&(a.projectsDropdown=s.body),a.loadingProjects=!1,a.cdr.markForCheck()}catch{a.loadingProjects=!1,a.cdr.markForCheck()}a.cdr.markForCheck()})()}detectChanges(){this.cdr.markForCheck()}createExportChart(){this.exportChart?.destroy(),this.exportChart=new S.kL(this.exportChartCanvas.nativeElement,{type:"bar",data:this.barChartData,options:this.barChartOptions}),this.exportChart?.update(),this.cdr.markForCheck()}export(){var n=this;return(0,C.Z)(function*(){const a=n.exportChartCanvas.nativeElement.toDataURL("image/png").replace("image/png","image/octet-stream"),s=document.createElement("a");s.setAttribute("href",a),s.setAttribute("download","Estimated vs Actual.png"),s.click()})()}onFilterChange(){this.get()}handleIndexChange(n){this.type=n,this.get()}selectAllTeamsChecked(n){if(n){for(const o of this.teamsDropdown)o.selected=!0;this.refreshCategories(),this.cdr.markForCheck()}else{for(const o of this.teamsDropdown)o.selected=!1;this.refreshCategories(),this.cdr.markForCheck()}}selectAllCategoriesChecked(n){if(n){this.selectNoCategory=!0;for(const o of this.categoriesDropdown)o.selected=!0;this.refreshProjects(),this.cdr.markForCheck()}else{this.selectNoCategory=!1;for(const o of this.categoriesDropdown)o.selected=!1;this.refreshProjects(),this.cdr.markForCheck()}}selectAllProjectsChecked(n){if(n){for(const o of this.projectsDropdown)o.selected=!0;this.onFilterChange(),this.cdr.markForCheck()}else{for(const o of this.projectsDropdown)o.selected=!1;this.onFilterChange(),this.cdr.markForCheck()}}}return(i=h).\u0275fac=function(n){return new(n||i)(t.Y36(t.sBO),t.Y36(H.m),t.Y36(_.U))},i.\u0275cmp=t.Xpm({type:i,selectors:[["worklenz-time-estimation-vs-actual-projects"]],viewQuery:function(n,o){if(1&n&&(t.Gf(A.jh,5),t.Gf(g,5),t.Gf(u,5)),2&n){let a;t.iGM(a=t.CRH())&&(o.barChart=a.first),t.iGM(a=t.CRH())&&(o.chartContainer=a.first),t.iGM(a=t.CRH())&&(o.exportChartCanvas=a.first)}},features:[t.TTD],decls:44,vars:27,consts:[[3,"title","showExport","isPngOnly","isDurationLabelSelected","exportFile"],[3,"nzLoading","nzTitle","nzExtra"],["projectsTitle",""],["class","position-relative",3,"height",4,"ngIf"],[4,"ngIf"],["toggleSection",""],["teamsSelector","nzDropdownMenu"],["nz-menu","",1,"pt-0",2,"max-height","330px","overflow-y","auto"],[1,"px-3","py-2","sticky-top","bg-white"],["type","text","placeholder","Search by team name","nz-input","",3,"ngModel","ngModelChange"],["teamSearchInput",""],["nz-checkbox","","nz-menu-item","",1,"m-0","align-items-baseline",3,"nzChecked","nzCheckedChange"],["nz-menu-divider",""],["class","m-0 align-items-baseline","nz-checkbox","","nz-menu-item","",3,"nzChecked","nzCheckedChange",4,"ngFor","ngForOf"],["projectsSelector","nzDropdownMenu"],[1,"px-3","py-2"],["type","text","placeholder","Search by project name","nz-input","",3,"ngModel","ngModelChange"],["projectSearchInput",""],["categorySelector","nzDropdownMenu"],["type","text","placeholder","Search by category name","nz-input","",3,"ngModel","ngModelChange"],["categorySearchInput",""],["nz-button","","nz-dropdown","",3,"nzDropdownMenu","nzClickHide","nzLoading","nzTrigger",4,"nzSpaceItem"],["nz-button","","nz-dropdown","",3,"nzDropdownMenu","nzClickHide","nzLoading","nzTrigger"],["nz-icon","","nzType","caret-down"],[1,"position-relative"],[1,"chartWrapper"],[1,"chartAreaWrapper"],["chartContainer",""],["baseChart","",3,"data","options","plugins","legend","type"],["exportChartCanvas",""],["nz-tooltip","",3,"nzOptions","nzTooltipTitle","nzValueChange"],[1,"d-flex","align-items-center","justify-content-center","user-select-none"],["nz-typography","",1,"d-block"],[1,"d-block"],[3,"nzColor","nzText"]],template:function(n,o){if(1&n&&(t.TgZ(0,"worklenz-rpt-header",0),t.NdJ("isDurationLabelSelected",function(s){return o.isDurationLabelSelected=s})("exportFile",function(){return o.export()}),t.qZA(),t.TgZ(1,"nz-content")(2,"nz-card",1),t.YNc(3,X,4,0,"ng-template",null,2,t.W1O),t.YNc(5,q,6,11,"div",3),t.YNc(6,tt,1,0,"nz-empty",4),t.YNc(7,et,1,2,"ng-template",null,5,t.W1O),t.qZA()(),t.TgZ(9,"nz-dropdown-menu",null,6)(11,"ul",7)(12,"li",8)(13,"input",9,10),t.NdJ("ngModelChange",function(s){return o.teamSearchText=s})("ngModelChange",function(){return o.detectChanges()}),t.qZA()(),t.TgZ(15,"li",11),t.NdJ("nzCheckedChange",function(s){return o.selectAllTeams=s})("nzCheckedChange",function(s){return o.selectAllTeamsChecked(s)}),t._uU(16,"Select all "),t.qZA(),t._UZ(17,"li",12),t.YNc(18,nt,2,2,"li",13),t.ALo(19,"searchByName"),t.qZA()(),t.TgZ(20,"nz-dropdown-menu",null,14)(22,"ul",7)(23,"li",15)(24,"input",16,17),t.NdJ("ngModelChange",function(s){return o.projectSearchText=s})("ngModelChange",function(){return o.detectChanges()}),t.qZA()(),t.TgZ(26,"li",11),t.NdJ("nzCheckedChange",function(s){return o.selectAllProjects=s})("nzCheckedChange",function(s){return o.selectAllProjectsChecked(s)}),t._uU(27,"Select all "),t.qZA(),t._UZ(28,"li",12),t.YNc(29,ot,5,2,"li",13),t.ALo(30,"searchByName"),t.qZA()(),t.TgZ(31,"nz-dropdown-menu",null,18)(33,"ul",7)(34,"li",8)(35,"input",19,20),t.NdJ("ngModelChange",function(s){return o.categorySearchText=s})("ngModelChange",function(){return o.detectChanges()}),t.qZA()(),t.TgZ(37,"li",11),t.NdJ("nzCheckedChange",function(s){return o.selectAllCategories=s})("nzCheckedChange",function(s){return o.selectAllCategoriesChecked(s)}),t._uU(38,"Select all "),t.qZA(),t._UZ(39,"li",12),t.TgZ(40,"li",11),t.NdJ("nzCheckedChange",function(s){return o.selectNoCategory=s})("nzCheckedChange",function(){return o.checkCategory()}),t._uU(41," No Category "),t.qZA(),t.YNc(42,at,5,3,"li",13),t.ALo(43,"searchByName"),t.qZA()()),2&n){const a=t.MAs(4),s=t.MAs(8),T=t.MAs(14),P=t.MAs(25),K=t.MAs(36);t.Q6J("title","Estimated vs Actual")("showExport",!0)("isPngOnly",!0),t.xp6(2),t.Q6J("nzLoading",o.loading)("nzTitle",a)("nzExtra",s),t.xp6(3),t.Q6J("ngIf",o.projects.length),t.xp6(1),t.Q6J("ngIf",!o.projects.length),t.xp6(7),t.Q6J("ngModel",o.teamSearchText),t.xp6(2),t.Q6J("nzChecked",o.selectAllTeams),t.xp6(3),t.Q6J("ngForOf",t.xi3(19,18,o.teamsDropdown,T.value)),t.xp6(6),t.Q6J("ngModel",o.projectSearchText),t.xp6(2),t.Q6J("nzChecked",o.selectAllProjects),t.xp6(3),t.Q6J("ngForOf",t.xi3(30,21,o.projectsDropdown,P.value)),t.xp6(6),t.Q6J("ngModel",o.categorySearchText),t.xp6(2),t.Q6J("nzChecked",o.selectAllCategories),t.xp6(3),t.Q6J("nzChecked",o.selectNoCategory),t.xp6(2),t.Q6J("ngForOf",t.xi3(43,24,o.categoriesDropdown,K.value))}},dependencies:[e.sg,e.O5,A.jh,R.I,O.OK,Y.bd,v.NU,v.$1,J.Zp,y.Fj,y.JJ,y.On,b.wO,b.r9,b.YV,E.cm,E.RR,E.wA,I.ix,Q.w,W.dQ,F.Ie,L.Ls,U.ZU,N.p9,V.wY,l.SY,p.x7,d.g],styles:[".chartWrapper[_ngcontent-%COMP%]{max-width:calc(100vw - 250px);min-width:calc(100vw - 250px);height:calc(100vh - 300px);overflow:auto}canvas[_ngcontent-%COMP%]{width:100%!important;height:100%!important}"]}),h})()}];let it=(()=>{var i;class h{}return(i=h).\u0275fac=function(n){return new(n||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[M.Bz.forChild(rt),M.Bz]}),h})(),st=(()=>{var i;class h{}return(i=h).\u0275fac=function(n){return new(n||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[e.ez,it,A.vQ,R.I,O.wm,Y.vh,v.zf,J.o7,y.u5,E.b1,I.sL,F.Wr,L.PV,U.ZJ,N.Xo,V.KW,l.cg,p.mS]}),h})()}}]);