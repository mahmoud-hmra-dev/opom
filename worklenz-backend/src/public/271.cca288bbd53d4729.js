"use strict";(self.webpackChunkworklenz=self.webpackChunkworklenz||[]).push([[271],{58684:(W,Z,n)=>{n.d(Z,{c:()=>i});var z=n(15861),e=n(65879),y=n(96814),M=n(43389),I=n(10095),O=n(9691),b=n(42840),E=n(3599),x=n(60095),f=n(16976),t=n(60804),A=n(66987),L=n(76271),U=n(8083),B=n(21406),C=n(82803),w=n(90586),S=n(70855),D=n(41958);const F=["templateSelect"];function V(o,_){if(1&o&&(e._UZ(0,"nz-option",14),e.ALo(1,"safeString")),2&o){const l=_.$implicit;e.Q6J("nzLabel",e.lcZ(1,2,l.name))("nzValue",l.id)}}function K(o,_){if(1&o){const l=e.EpF();e.TgZ(0,"li",15)(1,"ul",16)(2,"nz-list-item-action")(3,"a",17),e.NdJ("click",function(){const N=e.CHM(l).index,R=e.oxw(2);return e.KtG(R.removeTask(N))}),e._uU(4,"Remove"),e.qZA()()(),e._uU(5),e.qZA()}if(2&o){const l=_.$implicit;e.xp6(5),e.hij(" ",l.name," ")}}function J(o,_){if(1&o&&(e.TgZ(0,"form",3)(1,"div",4)(2,"div",5)(3,"nz-form-item",6)(4,"nz-form-label"),e._uU(5,"Select Template"),e.qZA(),e.TgZ(6,"nz-form-control",7)(7,"nz-select",8,9),e.YNc(9,V,2,4,"nz-option",10),e.qZA()()(),e._UZ(10,"nz-divider"),e.TgZ(11,"span",11),e._uU(12),e.qZA(),e.TgZ(13,"ul",12),e.YNc(14,K,6,1,"li",13),e.qZA()()()()),2&o){const l=e.oxw();e.Q6J("formGroup",l.form),e.xp6(1),e.Q6J("nzGutter",8),e.xp6(6),e.Q6J("nzPlaceHolder","Please select a template to load tasks")("formControlName","template")("nzLoading",l.loadingTemplates),e.xp6(2),e.Q6J("ngForOf",l.templates),e.xp6(3),e.hij("Selected Tasks (",l.tasks.length,")"),e.xp6(1),e.Q6J("nzDataSource",l.tasks)("nzLoading",l.loadingData)("nzNoResult","No template selected! Please select a template to load tasks."),e.xp6(1),e.Q6J("ngForOf",l.tasks)}}function s(o,_){if(1&o){const l=e.EpF();e.TgZ(0,"div",18)(1,"button",19),e.NdJ("click",function(){e.CHM(l);const v=e.oxw();return e.KtG(v.closeDrawer())}),e._uU(2,"Cancel"),e.qZA(),e.TgZ(3,"button",20),e.NdJ("click",function(){e.CHM(l);const v=e.oxw();return e.KtG(v.importFromTemplate())}),e._uU(4,"Import"),e.qZA()()}if(2&o){const l=e.oxw();e.xp6(3),e.Q6J("nzLoading",l.importing)}}const g=function(){return{overflow:"auto"}};let i=(()=>{var o;class _{constructor(p,v,N,R,Q){this.api=p,this.ngZone=v,this.app=N,this.fb=R,this.cdr=Q,this.drawerVisible=!1,this.projectId=null,this.onImportDone=new e.vpe,this.onCancel=new e.vpe,this.selectedId=null,this.loadingTemplates=!1,this.loadingData=!1,this.importing=!1,this.templates=[],this.tasks=[],this.form=this.fb.group({template:[null,x.kI.required]}),this.form.get("template")?.valueChanges.subscribe($=>{$&&(this.selectedId=$,this.templateSelected())})}ngOnDestroy(){this.reset(),this.cdr.markForCheck()}open(){this.drawerVisible=!0,this.cdr.markForCheck()}closeDrawer(){this.form.reset(),this.tasks=[],this.onCancel.emit(),this.cdr.markForCheck()}onVisibleChange(p){p&&(this.getTaskTemplate(),this.ngZone.runOutsideAngular(()=>{setTimeout(()=>{this.selectTemplate?.focus()},B.GR)})),this.cdr.markForCheck()}getTaskTemplate(){var p=this;return(0,z.Z)(function*(){try{p.loadingTemplates=!0;const v=yield p.api.get();v.done&&(p.templates=v.body,p.loadingTemplates=!1)}catch{p.loadingTemplates=!1}p.cdr.markForCheck()})()}getTemplateData(){var p=this;return(0,z.Z)(function*(){if(p.selectedId){try{p.loadingData=!0;const v=yield p.api.getById(p.selectedId);v.done&&(p.tasks=v.body.tasks||[],p.loadingData=!1)}catch{p.loadingData=!1}p.cdr.markForCheck()}})()}templateSelected(){this.getTemplateData()}removeTask(p){this.tasks.length>1?this.tasks.splice(p,1):this.tasks=[]}validateForm(){for(const p in this.form.controls)this.form.controls[p].updateValueAndValidity();this.cdr.markForCheck()}importFromTemplate(){var p=this;return(0,z.Z)(function*(){if(p.projectId){try{if(p.validateForm(),p.form.invalid)return void p.form.markAsTouched();p.tasks.length?(p.importing=!0,(yield p.api.import(p.projectId,p.tasks)).done&&(p.api.emitOnImport(),p.onImportDone.emit(),p.reset(),p.drawerVisible=!1),p.importing=!1):p.app.notify("Incomplete request!","No tasks to import",!1)}catch{p.importing=!1}p.cdr.markForCheck()}})()}reset(){this.tasks=[],this.selectedId=null,this.form.reset(),this.cdr.markForCheck()}}return(o=_).\u0275fac=function(p){return new(p||o)(e.Y36(C.e),e.Y36(e.R0b),e.Y36(w.z),e.Y36(x.qu),e.Y36(e.sBO))},o.\u0275cmp=e.Xpm({type:o,selectors:[["worklenz-import-tasks-template"]],viewQuery:function(p,v){if(1&p&&e.Gf(F,5),2&p){let N;e.iGM(N=e.CRH())&&(v.selectTemplate=N.first)}},inputs:{drawerVisible:"drawerVisible",projectId:"projectId"},outputs:{onImportDone:"onImportDone",onCancel:"onCancel"},standalone:!0,features:[e.jDz],decls:4,vars:6,consts:[[3,"nzBodyStyle","nzWidth","nzVisible","nzTitle","nzFooter","nzOnClose","nzVisibleChange"],["nz-form","",3,"formGroup",4,"nzDrawerContent"],["footerTpl",""],["nz-form","",3,"formGroup"],["nz-row","",3,"nzGutter"],["nz-col","","nzSpan","24"],[1,"mb-4"],["nzErrorTip","Please select a template!"],["name","template",3,"nzPlaceHolder","formControlName","nzLoading"],["templateSelect",""],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],["nz-typography","",1,"fw-bold"],["nz-list","","nzBordered","",1,"mt-4",3,"nzDataSource","nzLoading","nzNoResult"],["nz-list-item","",4,"ngFor","ngForOf"],[3,"nzLabel","nzValue"],["nz-list-item",""],["nz-list-item-actions",""],[3,"click"],[2,"float","right"],["nz-button","",2,"margin-right","8px",3,"click"],["nz-button","","nzType","primary",3,"nzLoading","click"]],template:function(p,v){if(1&p&&(e.TgZ(0,"nz-drawer",0),e.NdJ("nzOnClose",function(){return v.closeDrawer()})("nzVisibleChange",function(R){return v.onVisibleChange(R)}),e.YNc(1,J,15,11,"form",1),e.YNc(2,s,5,1,"ng-template",null,2,e.W1O),e.qZA()),2&p){const N=e.MAs(3);e.Q6J("nzBodyStyle",e.DdM(5,g))("nzWidth",650)("nzVisible",v.drawerVisible)("nzTitle","Import tasks")("nzFooter",N)}},dependencies:[y.ez,y.sg,M.BL,M.Vz,M.SQ,I.Jb,I.t3,I.SK,O.LV,O.Ip,O.Vq,b.sL,b.ix,S.w,D.dQ,E.U5,E.Lr,E.Nx,E.iK,E.Fd,x.u5,x._Y,x.JJ,x.JL,f.Ph,f.n_,f.AA,f.nk,f.KC,t.Xo,x.UX,x.sg,x.u,A.S,A.g,L.m,U.ZJ,U.ZU],changeDetection:0}),_})()},66770:(W,Z,n)=>{n.d(Z,{w:()=>P});var z=n(15861),e=n(65879),y=n(60095),M=n(69649),I=n(9691),O=n(96814),b=n(8083),E=n(3599),x=n(62595),f=n(96928),t=n(96109),A=n(42840),L=n(2919),U=n(21406),B=n(45538),C=n(93302),w=n(52787),S=n(18223),D=n(9435),F=n(10095),V=n(70855),K=n(41958);const J=["searchInput"];function s(u,k){if(1&u&&(e.TgZ(0,"nz-form-label",2),e._uU(1),e.qZA()),2&u){const d=e.oxw();e.Q6J("nzSpan",null),e.xp6(1),e.Oqu(d.label)}}function g(u,k){if(1&u&&(e.TgZ(0,"nz-option",10)(1,"div",11),e._UZ(2,"nz-avatar",12),e.ALo(3,"firstCharUpper"),e.TgZ(4,"div",13)(5,"span",14),e._uU(6),e.qZA(),e.TgZ(7,"small",15),e._uU(8),e.qZA()()()()),2&u){const d=e.oxw().$implicit;e.s9C("nzLabel",d.name),e.Q6J("nzValue",d.id),e.xp6(2),e.Udp("background-color",d.avatar_url?"#ececec":d.color_code),e.Q6J("nzSize",28)("nzText",e.lcZ(3,11,d.name))("nzTooltipTitle",d.name)("nzSrc",d.avatar_url)("nzTooltipPlacement","top"),e.xp6(4),e.Oqu(d.name),e.xp6(2),e.Oqu(d.email)}}function i(u,k){if(1&u&&(e.ynx(0,8),e.YNc(1,g,9,13,"nz-option",9),e.BQk()),2&u){const d=e.oxw();e.xp6(1),e.Q6J("ngIf",!d.searching)}}function o(u,k){1&u&&(e.TgZ(0,"nz-option",16),e._UZ(1,"span",17),e._uU(2," Loading Data... "),e.qZA())}function _(u,k){if(1&u){const d=e.EpF();e.TgZ(0,"button",18),e.NdJ("click",function(){e.CHM(d);const c=e.oxw();return e.KtG(c.sendInvitation())}),e._UZ(1,"span",19),e._uU(2),e.qZA(),e.TgZ(3,"div",20),e._uU(4," Invitees will be added to the team and project either they accept the invitation or not. "),e.qZA()}if(2&u){const d=e.oxw();e.Q6J("disabled",!d.isValueIsAnEmail()||d.inviting)("nzLoading",d.inviting),e.xp6(2),e.hij(" ",d.buttonText," ")}}const l=function(){return{"min-height":"50px"}},p=function(){return[]};let v=(()=>{var u;class k{get buttonText(){return this.isValueIsAnEmail()?"Invite as a member":"Invite a new member by email"}constructor(a,c,T,j,G,ee,te,ne){this.api=a,this.membersApi=c,this.fb=T,this.route=j,this.ngZone=G,this.cdr=ee,this.projectsService=te,this.auth=ne,this.refresh=new e.vpe,this.membersChange=new e.vpe,this.members=[],this.placeholder="Select Members",this.label="Members",this.multiple=!1,this.disabled=!1,this.autofocus=!1,this.disableTeamInvites=!1,this.loading=!1,this.searching=!1,this.inviting=!1,this.model={},this.searchingName=null,this.projectId=null,this.projectId=this.route.snapshot.paramMap.get("id"),this.form=this.fb.group({members:[]}),this.form.controls.members?.valueChanges.subscribe(ie=>{this.emitChanges(ie)})}ngOnInit(){var a=this;return(0,z.Z)(function*(){a.form.controls.members.setValue(a.members||[]),yield a.init(),a.cdr.detectChanges()})()}ngAfterViewInit(){this.autofocus&&(this.ngZone.runOutsideAngular(()=>{setTimeout(()=>{this.searchInput.setOpenState(!0)},U.GR)}),this.cdr.detectChanges())}init(){var a=this;return(0,z.Z)(function*(){a.loading=!0,yield a.get(),a.loading=!1,a.cdr.detectChanges()})()}get(){var a=this;return(0,z.Z)(function*(){try{const c=yield a.api.get(1,5,"name",null,a.searchingName);c.done&&(a.model=c.body),a.cdr.detectChanges()}catch(c){(0,M.tu)(c),a.cdr.detectChanges()}})()}search(a){var c=this;return(0,z.Z)(function*(){c.searchingName=a,c.searching=!0,yield c.get(),c.searching=!1,c.cdr.detectChanges()})()}reset(){this.form.reset(),this.searchingName=null,this.init(),this.cdr.detectChanges()}emitChanges(a){this.members=a,this.membersChange.emit(a),this.cdr.detectChanges()}trackById(a,c){return c.id}isValueIsAnEmail(){return!!this.searchingName&&(0,M.PH)(this.searchingName)}resetSearchInput(){this.reset(),this.searchInput.clearInput(),this.searchInput.focus(),this.cdr.detectChanges()}handleEnterKeyPress(a){"Enter"===a.code&&this.isValueIsAnEmail()&&this.sendInvitation()}sendInvitation(){var a=this;return(0,z.Z)(function*(){if(a.projectId&&"string"==typeof a.searchingName&&a.searchingName.length)try{const c=a.searchingName.trim().toLowerCase(),T={project_id:a.projectId,email:c};a.inviting=!0;const j=yield a.membersApi.createByEmail(T);a.inviting=!1,j.done&&(a.resetSearchInput(),a.refresh?.emit()),a.cdr.detectChanges()}catch{a.inviting=!1,a.cdr.detectChanges()}})()}}return(u=k).\u0275fac=function(a){return new(a||u)(e.Y36(B.B),e.Y36(C.r),e.Y36(y.qu),e.Y36(w.gz),e.Y36(e.R0b),e.Y36(e.sBO),e.Y36(S.m),e.Y36(D.e))},u.\u0275cmp=e.Xpm({type:u,selectors:[["worklenz-team-members-autocomplete"]],viewQuery:function(a,c){if(1&a&&e.Gf(J,5),2&a){let T;e.iGM(T=e.CRH())&&(c.searchInput=T.first)}},hostBindings:function(a,c){1&a&&e.NdJ("keydown",function(j){return c.handleEnterKeyPress(j)},!1,e.evT)},inputs:{members:"members",placeholder:"placeholder",label:"label",multiple:"multiple",disabled:"disabled",autofocus:"autofocus",disableTeamInvites:"disableTeamInvites"},outputs:{refresh:"refresh",membersChange:"membersChange"},standalone:!0,features:[e.jDz],decls:10,vars:17,consts:[["nz-form","",3,"formGroup","nzLayout"],[3,"nzSpan",4,"ngIf"],[3,"nzSpan"],["nzAllowClear","","nzServerSearch","","nzShowSearch","",1,"member-add-selector",3,"formControlName","nzDisabled","nzLoading","nzMode","nzPlaceHolder","nzNotFoundContent","nzShowArrow","nzDropdownStyle","nzOnSearch"],["searchInput",""],["style","min-height: 50px",4,"ngFor","ngForOf","ngForTrackBy"],["nzCustomContent","","nzDisabled","",4,"ngIf"],["notFoundContentTemplate",""],[2,"min-height","50px"],["nzCustomContent","",3,"nzValue","nzLabel",4,"ngIf"],["nzCustomContent","",3,"nzValue","nzLabel"],[1,"d-flex","align-items-center","user-select-none"],["nz-tooltip","",1,"mt-auto","mb-auto","me-2",3,"nzSize","nzText","nzTooltipTitle","nzSrc","nzTooltipPlacement"],[2,"line-height","15px"],["nz-typography","",1,"d-block"],["nz-typography","","nzType","secondary"],["nzCustomContent","","nzDisabled",""],["nz-icon","","nzType","loading",1,"loading-icon"],["nz-button","","nzType","primary","nzBlock","",3,"disabled","nzLoading","click"],["nz-icon","","nzType","mail","nzTheme","outline"],["nz-typography","","nzType","secondary",1,"mt-2","mb-0",2,"font-size","12px"]],template:function(a,c){if(1&a&&(e.TgZ(0,"form",0)(1,"nz-form-item"),e.YNc(2,s,2,2,"nz-form-label",1),e.TgZ(3,"nz-form-control",2)(4,"nz-select",3,4),e.NdJ("nzOnSearch",function(j){return c.search(j)}),e.YNc(6,i,2,1,"ng-container",5),e.YNc(7,o,3,0,"nz-option",6),e.qZA()()()(),e.YNc(8,_,5,3,"ng-template",null,7,e.W1O)),2&a){const T=e.MAs(9);e.Q6J("formGroup",c.form)("nzLayout","vertical"),e.xp6(2),e.Q6J("ngIf",c.label),e.xp6(1),e.Q6J("nzSpan",null),e.xp6(1),e.Q6J("formControlName","members")("nzDisabled",c.disabled)("nzLoading",c.loading)("nzMode",c.multiple?"multiple":"default")("nzPlaceHolder",c.placeholder)("nzNotFoundContent",c.disableTeamInvites?"":T)("nzShowArrow",!1)("nzDropdownStyle",e.DdM(15,l)),e.xp6(2),e.Q6J("ngForOf",c.model.data||e.DdM(16,p))("ngForTrackBy",c.trackById),e.xp6(1),e.Q6J("ngIf",c.searching)}},dependencies:[I.LV,I.Ip,I.Vq,O.O5,b.ZJ,b.ZU,y.UX,y._Y,y.JJ,y.JL,y.sg,y.u,E.U5,F.t3,F.SK,E.Lr,E.Nx,E.iK,E.Fd,O.sg,x.PV,x.Ls,f.Rt,f.Dz,t.cg,t.SY,A.sL,A.ix,V.w,K.dQ,L.I],changeDetection:0}),k})();var N=n(82669),R=n(16976),Q=n(43389),$=n(19035),Y=n(71993),X=n(76271),q=n(55416),H=n(45019);function r(u,k){if(1&u){const d=e.EpF();e.TgZ(0,"nz-list-item",8)(1,"div",9),e._UZ(2,"nz-avatar",10),e.ALo(3,"firstCharUpper"),e.ALo(4,"safeString"),e.TgZ(5,"div",11)(6,"span",12),e._uU(7),e.qZA(),e.TgZ(8,"small",13),e._uU(9),e.qZA()()(),e.TgZ(10,"button",14),e.NdJ("nzOnConfirm",function(){const T=e.CHM(d).$implicit,j=e.oxw(3);return e.KtG(j.removeMember(T.id))}),e._UZ(11,"span",15),e.qZA()()}if(2&u){const d=k.$implicit;e.xp6(2),e.Udp("background-color",d.avatar_url?"#ececec":d.color_code),e.Q6J("nzSize",28)("nzText",e.lcZ(3,15,d.name))("nzTooltipTitle",e.lcZ(4,17,d.name))("nzSrc",d.avatar_url)("nzTooltipPlacement","top"),e.xp6(5),e.Oqu(d.name),e.xp6(2),e.Oqu(d.email),e.xp6(1),e.Q6J("nzOkText","OK")("nzPopconfirmTitle","Member will also removes from assigned tasks.")("nzSize","small")("nzTooltipPlacement","top")("nzTooltipTitle","Remove from project")("nzType","default")}}function h(u,k){if(1&u&&(e.TgZ(0,"nz-list",6),e.YNc(1,r,12,19,"nz-list-item",7),e.qZA()),2&u){const d=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",d.members)("ngForTrackBy",d.trackById)}}function m(u,k){if(1&u){const d=e.EpF();e.ynx(0),e.TgZ(1,"nz-spin",2)(2,"form",3)(3,"worklenz-team-members-autocomplete",4),e.NdJ("membersChange",function(c){e.CHM(d);const T=e.oxw();return e.KtG(T.membersChange(c))})("refresh",function(){e.CHM(d);const c=e.oxw();return e.KtG(c.getMembers())}),e.qZA()(),e.YNc(4,h,2,2,"nz-list",5),e.qZA(),e.BQk()}if(2&u){const d=e.oxw();e.xp6(1),e.Q6J("nzSpinning",!1),e.xp6(1),e.Q6J("nzLayout","vertical"),e.xp6(1),e.Q6J("label","Add members by adding their name or email")("placeholder","Type name or email...")("autofocus",d.autofocus)("disableTeamInvites",d.adminAndManager()),e.xp6(1),e.Q6J("ngIf",d.members.length)}}let P=(()=>{var u;class k{constructor(a,c,T,j,G){this.api=a,this.list=c,this.projectFormService=T,this.cdr=j,this.auth=G,this.show=!1,this.showChange=new e.vpe,this.onUpdate=new e.vpe,this.projectId=null,this.isProjectManager=!1,this.loading=!1,this.autofocus=!1,this.members=[],this.isProjectManagerAndAdmin=!1,this.list.onInviteClick$.pipe((0,Y.sL)()).subscribe(()=>{this.autofocus=!0,this.show=!0,this.showChange.emit(!0)})}closeModal(){this.projectFormService.emitMemberAssignOrRemoveReProject(),this.autofocus=!1,this.show=!1,this.showChange.emit(!1)}adminAndManager(){return this.isProjectManager&&this.auth.isOwnerOrAdmin()?this.isProjectManagerAndAdmin=!1:!(!this.isProjectManager||this.auth.isOwnerOrAdmin())&&(this.isProjectManagerAndAdmin=!0)}getMembers(){var a=this;return(0,z.Z)(function*(){if(a.projectId){try{a.loading=!0;const c=yield a.api.getByProjectId(a.projectId);c.done&&(a.members=c.body),a.loading=!1}catch(c){(0,M.tu)(c),a.loading=!1}a.cdr.markForCheck()}})()}addMember(a){var c=this;return(0,z.Z)(function*(){if(a&&c.projectId){try{c.teamMembersAutocomplete.reset(),(yield c.api.create({team_member_id:a,project_id:c.projectId})).done&&(c.onUpdate?.emit(),c.getMembers(),c.projectFormService.emitMemberAssignOrRemoveReProject())}catch(T){(0,M.tu)(T)}c.cdr.markForCheck()}})()}onVisibleChange(a){a&&this.getMembers()}membersChange(a){if(Array.isArray(a)&&!a.length)return;const c=Array.isArray(a)&&a.length?a[0]:a;c&&(this.addMember(c),this.cdr.markForCheck())}removeMember(a){var c=this;return(0,z.Z)(function*(){if(a)try{(yield c.api.deleteById(a,c.projectId)).done&&(c.onUpdate?.emit(),yield c.getMembers(),c.projectFormService.emitMemberAssignOrRemoveReProject(),c.cdr.markForCheck())}catch(T){(0,M.tu)(T)}})()}trackById(a,c){return c.id}}return(u=k).\u0275fac=function(a){return new(a||u)(e.Y36(C.r),e.Y36(q.b),e.Y36(H.s),e.Y36(e.sBO),e.Y36(D.e))},u.\u0275cmp=e.Xpm({type:u,selectors:[["worklenz-project-members-form"]],viewQuery:function(a,c){if(1&a&&e.Gf(v,5),2&a){let T;e.iGM(T=e.CRH())&&(c.teamMembersAutocomplete=T.first)}},inputs:{show:"show",projectId:"projectId",isProjectManager:"isProjectManager"},outputs:{showChange:"showChange",onUpdate:"onUpdate"},standalone:!0,features:[e.jDz],decls:2,vars:4,consts:[[3,"nzVisible","nzClosable","nzPlacement","nzTitle","nzOnClose","nzVisibleChange"],[4,"nzDrawerContent"],[3,"nzSpinning"],["nz-form","",3,"nzLayout"],[3,"label","placeholder","autofocus","disableTeamInvites","membersChange","refresh"],["class","scrollable-list mb-4","nzBordered","","nzSize","small",4,"ngIf"],["nzBordered","","nzSize","small",1,"scrollable-list","mb-4"],["class","default-list-item-p-11",4,"ngFor","ngForOf","ngForTrackBy"],[1,"default-list-item-p-11"],[1,"d-flex","align-items-center","user-select-none"],["nz-tooltip","",1,"mt-auto","mb-auto","me-2",3,"nzSize","nzText","nzTooltipTitle","nzSrc","nzTooltipPlacement"],[2,"line-height","15px"],["nz-typography","",1,"d-block"],["nz-typography","","nzType","secondary"],["nz-button","","nz-popconfirm","","nz-tooltip","",3,"nzOkText","nzPopconfirmTitle","nzSize","nzTooltipPlacement","nzTooltipTitle","nzType","nzOnConfirm"],["nz-icon","","nzType","delete"]],template:function(a,c){1&a&&(e.TgZ(0,"nz-drawer",0),e.NdJ("nzOnClose",function(){return c.closeModal()})("nzVisibleChange",function(j){return c.show=j})("nzVisibleChange",function(j){return c.onVisibleChange(j)}),e.YNc(1,m,5,7,"ng-container",1),e.qZA()),2&a&&e.Q6J("nzVisible",c.show)("nzClosable",!0)("nzPlacement","right")("nzTitle","Project Members")},dependencies:[N.j,N.W,R.Ph,R.n_,R.AA,Q.BL,Q.Vz,Q.SQ,O.O5,t.cg,t.SY,b.ZJ,b.ZU,O.sg,$._p,$.JW,E.U5,E.Lr,A.sL,A.ix,V.w,K.dQ,x.PV,x.Ls,v,f.Rt,f.Dz,L.I,X.m]}),k})()},670:(W,Z,n)=>{n.d(Z,{e:()=>J});var z=n(15861),e=n(96814),y=n(43389),M=n(3599),I=n(60095),O=n(8083),b=n(62612),E=n(20824),x=n(42840),f=n(69649),t=n(65879),A=n(80697),L=n(10095),U=n(70855),B=n(41958);const C=["templateNameInput"];function w(s,g){1&s&&(t.TgZ(0,"span",17),t._uU(1,"Name cannot be empty!"),t.qZA())}function S(s,g){if(1&s){const i=t.EpF();t.ynx(0),t.TgZ(1,"label",12),t.NdJ("ngModelChange",function(_){t.CHM(i);const l=t.oxw(2);return t.KtG(l.tStatusCheck=_)}),t._uU(2,"Status"),t.qZA(),t.BQk()}if(2&s){const i=t.oxw(2);t.xp6(1),t.Q6J("nzChecked",i.tStatusCheck)("ngModel",i.tStatusCheck)("nzDisabled",i.checked)}}function D(s,g){if(1&s){const i=t.EpF();t.ynx(0),t.TgZ(1,"label",13),t.NdJ("ngModelChange",function(_){t.CHM(i);const l=t.oxw(2);return t.KtG(l.tPhaseCheck=_)}),t._uU(2,"Phase"),t.qZA(),t.BQk()}if(2&s){const i=t.oxw(2);t.xp6(1),t.Q6J("nzChecked",i.tPhaseCheck)("ngModel",i.tPhaseCheck)}}function F(s,g){if(1&s){const i=t.EpF();t.ynx(0),t.TgZ(1,"label",13),t.NdJ("ngModelChange",function(_){t.CHM(i);const l=t.oxw(2);return t.KtG(l.tLabelsCheck=_)}),t._uU(2,"Labels"),t.qZA(),t.BQk()}if(2&s){const i=t.oxw(2);t.xp6(1),t.Q6J("nzChecked",i.tLabelsCheck)("ngModel",i.tLabelsCheck)}}function V(s,g){if(1&s){const i=t.EpF();t.TgZ(0,"div")(1,"nz-form-item")(2,"nz-form-label",3),t._uU(3,"Template name"),t.qZA(),t.TgZ(4,"nz-form-control",4)(5,"input",5,6),t.NdJ("ngModelChange",function(_){t.CHM(i);const l=t.oxw();return t.KtG(l.templateName=_)})("ngModelChange",function(_){t.CHM(i);const l=t.oxw();return t.KtG(l.nameChange(_))}),t.qZA(),t.YNc(7,w,2,0,"span",7),t.qZA()(),t.TgZ(8,"div",8)(9,"span",9),t._uU(10,"What should be included in the template from the project ?"),t.qZA(),t.TgZ(11,"div",10)(12,"div",11)(13,"label",12),t.NdJ("ngModelChange",function(_){t.CHM(i);const l=t.oxw();return t.KtG(l.pStatusCheck=_)})("ngModelChange",function(_){t.CHM(i);const l=t.oxw();return t.KtG(l.projectCheckChange("pStatuses",_))}),t._uU(14,"Statuses"),t.qZA()(),t.TgZ(15,"div")(16,"label",13),t.NdJ("ngModelChange",function(_){t.CHM(i);const l=t.oxw();return t.KtG(l.pPhasesCheck=_)})("ngModelChange",function(_){t.CHM(i);const l=t.oxw();return t.KtG(l.projectCheckChange("pPhases",_))}),t._uU(17,"Phases"),t.qZA()(),t.TgZ(18,"div",14)(19,"label",13),t.NdJ("ngModelChange",function(_){t.CHM(i);const l=t.oxw();return t.KtG(l.pLabelsCheck=_)})("ngModelChange",function(_){t.CHM(i);const l=t.oxw();return t.KtG(l.projectCheckChange("pLabels",_))}),t._uU(20,"Labels"),t.qZA()()()(),t.TgZ(21,"div")(22,"span",9),t._uU(23,"What should be included in tasks ?"),t.qZA(),t.TgZ(24,"div",10)(25,"div",11)(26,"label",12),t.NdJ("ngModelChange",function(_){t.CHM(i);const l=t.oxw();return t.KtG(l.checked=_)}),t._uU(27,"Name"),t.qZA()(),t.TgZ(28,"div",15)(29,"label",12),t.NdJ("ngModelChange",function(_){t.CHM(i);const l=t.oxw();return t.KtG(l.checked=_)}),t._uU(30,"Priority"),t.qZA()(),t.TgZ(31,"div",15),t.YNc(32,S,3,3,"ng-container",16),t.qZA(),t.TgZ(33,"div",15),t.YNc(34,D,3,2,"ng-container",16),t.qZA(),t.TgZ(35,"div",15),t.YNc(36,F,3,2,"ng-container",16),t.qZA(),t.TgZ(37,"div",15),t.ynx(38),t.TgZ(39,"label",13),t.NdJ("ngModelChange",function(_){t.CHM(i);const l=t.oxw();return t.KtG(l.tEstimationCheck=_)}),t._uU(40,"Time Estimation"),t.qZA(),t.BQk(),t.qZA(),t.TgZ(41,"div",15),t.ynx(42),t.TgZ(43,"label",13),t.NdJ("ngModelChange",function(_){t.CHM(i);const l=t.oxw();return t.KtG(l.tDescriptionCheck=_)}),t._uU(44,"Description"),t.qZA(),t.BQk(),t.qZA(),t.TgZ(45,"div"),t.ynx(46),t.TgZ(47,"label",13),t.NdJ("ngModelChange",function(_){t.CHM(i);const l=t.oxw();return t.KtG(l.tSubTasksCheck=_)}),t._uU(48,"Sub Tasks"),t.qZA(),t.BQk(),t.qZA()()()()}if(2&s){const i=t.oxw();t.xp6(2),t.Q6J("nzSpan",24),t.xp6(2),t.Q6J("nzSpan",24),t.xp6(1),t.Q6J("placeholder","Enter template name")("ngClass",i.showErrorText?"error-input":"")("ngModel",i.templateName),t.xp6(2),t.Q6J("ngIf",i.showErrorText),t.xp6(6),t.Q6J("nzChecked",i.pStatusCheck)("ngModel",i.pStatusCheck)("nzDisabled",i.checked),t.xp6(3),t.Q6J("nzChecked",i.pPhasesCheck)("ngModel",i.pPhasesCheck),t.xp6(3),t.Q6J("nzChecked",i.pLabelsCheck)("ngModel",i.pLabelsCheck),t.xp6(7),t.Q6J("nzChecked",!0)("ngModel",i.checked)("nzDisabled",i.checked),t.xp6(3),t.Q6J("nzChecked",!0)("ngModel",i.checked)("nzDisabled",i.checked),t.xp6(3),t.Q6J("ngIf",i.pStatusCheck),t.xp6(2),t.Q6J("ngIf",i.pPhasesCheck),t.xp6(2),t.Q6J("ngIf",i.pLabelsCheck),t.xp6(3),t.Q6J("nzChecked",i.tEstimationCheck)("ngModel",i.tEstimationCheck),t.xp6(4),t.Q6J("nzChecked",i.tDescriptionCheck)("ngModel",i.tDescriptionCheck),t.xp6(4),t.Q6J("nzChecked",i.tSubTasksCheck)("ngModel",i.tSubTasksCheck)}}function K(s,g){if(1&s){const i=t.EpF();t.TgZ(0,"div",18)(1,"button",19),t.NdJ("click",function(){t.CHM(i);const _=t.oxw();return t.KtG(_.close())}),t._uU(2,"Cancel"),t.qZA(),t.TgZ(3,"button",20),t.NdJ("click",function(){t.CHM(i);const _=t.oxw();return t.KtG(_.saveTemplate())}),t._uU(4," Save "),t.qZA()()}if(2&s){const i=t.oxw();t.xp6(3),t.Q6J("nzLoading",i.creating)("disabled",i.disableBtnActive)}}let J=(()=>{var s;class g{constructor(o,_,l){this.cdr=o,this.api=_,this.ngZone=l,this.projectId=null,this.templateName=null,this.show=!1,this.checked=!0,this.showErrorText=!1,this.disableBtnActive=!0,this.pStatusCheck=!0,this.pPhasesCheck=!0,this.pLabelsCheck=!0,this.tStatusCheck=!0,this.tPhaseCheck=!0,this.tEstimationCheck=!0,this.tLabelsCheck=!0,this.tDescriptionCheck=!0,this.tSubTasksCheck=!0,this.creating=!1}open(){var o=this;return(0,z.Z)(function*(){o.show=!0,o.ngZone.runOutsideAngular(()=>{setTimeout(()=>{o.templateNameInput.nativeElement.focus()},100)}),o.cdr.markForCheck()})()}close(){this.show=!1,this.cdr.markForCheck()}nameChange(o){""!==o.trim()?(this.disableBtnActive=!1,this.showErrorText=!1,this.cdr.markForCheck()):this.showErrorText=!0}projectCheckChange(o,_){switch(o){case"pStatuses":_||(this.tStatusCheck=!1);break;case"pPhases":_||(this.tPhaseCheck=!1);break;case"pLabels":_||(this.tLabelsCheck=!1)}this.cdr.markForCheck()}saveTemplate(){var o=this;return(0,z.Z)(function*(){if(o.templateName&&""!==o.templateName.trim()&&o.projectId)try{o.creating=!0;const _={project_id:o.projectId,templateName:o.templateName,projectIncludes:{statuses:o.pStatusCheck,phases:o.pPhasesCheck,labels:o.pLabelsCheck},taskIncludes:{status:o.tStatusCheck,phase:o.tPhaseCheck,labels:o.tLabelsCheck,estimation:o.tEstimationCheck,description:o.tDescriptionCheck,subtasks:o.tSubTasksCheck}};(yield o.api.createCustomTemplate(_)).done&&(o.creating=!1,o.show=!1),o.creating=!1,o.cdr.markForCheck()}catch(_){(0,f.tu)(_),o.cdr.markForCheck()}else o.showErrorText=!0})()}}return(s=g).\u0275fac=function(o){return new(o||s)(t.Y36(t.sBO),t.Y36(A.I),t.Y36(t.R0b))},s.\u0275cmp=t.Xpm({type:s,selectors:[["worklenz-project-template-create-drawer"]],viewQuery:function(o,_){if(1&o&&t.Gf(C,5),2&o){let l;t.iGM(l=t.CRH())&&(_.templateNameInput=l.first)}},inputs:{projectId:"projectId"},standalone:!0,features:[t.jDz],decls:4,vars:5,consts:[["nzPlacement","right",3,"nzClosable","nzVisible","nzWidth","nzTitle","nzFooter","nzOnClose"],[4,"nzDrawerContent"],["footer",""],["nzRequired","",3,"nzSpan"],[3,"nzSpan"],["nz-input","",1,"w-100",3,"placeholder","ngClass","ngModel","ngModelChange"],["templateNameInput",""],["class","empty-error-text",4,"ngIf"],[1,"ant-form-item"],["nz-typography",""],[1,"ms-2"],[1,"my-2"],["nz-checkbox","",3,"nzChecked","ngModel","nzDisabled","ngModelChange"],["nz-checkbox","",3,"nzChecked","ngModel","ngModelChange"],[1,"mt-2"],[1,"mb-2"],[4,"ngIf"],[1,"empty-error-text"],[2,"float","right"],["nz-button","",2,"margin-right","8px",3,"click"],["nz-button","","nzType","primary",3,"nzLoading","disabled","click"]],template:function(o,_){if(1&o&&(t.TgZ(0,"nz-drawer",0),t.NdJ("nzOnClose",function(){return _.close()}),t.YNc(1,V,49,28,"div",1),t.YNc(2,K,5,2,"ng-template",null,2,t.W1O),t.qZA()),2&o){const l=t.MAs(3);t.Q6J("nzClosable",!0)("nzVisible",_.show)("nzWidth",420)("nzTitle","Save as template")("nzFooter",l)}},dependencies:[e.ez,e.mk,e.O5,y.BL,y.Vz,y.SQ,M.U5,L.t3,L.SK,M.Nx,M.iK,M.Fd,I.u5,I.Fj,I.JJ,I.On,O.ZJ,O.ZU,b.Wr,b.Ie,E.o7,E.Zp,x.sL,x.ix,U.w,B.dQ],styles:['.required-star[_ngcontent-%COMP%]{display:inline-block;margin-right:4px;color:#ff4d4f;font-size:14px;font-family:SimSun,sans-serif;line-height:1;content:"*"}.empty-error-text[_ngcontent-%COMP%]{color:#ff4d4f}.error-input[_ngcontent-%COMP%]{border-color:#ff4d4f;box-shadow:none}'],changeDetection:0}),g})()},68907:(W,Z,n)=>{n.d(Z,{a:()=>f});var z=n(96814),e=n(60095),y=n(42840),M=n(3599),I=n(20824),O=n(36513),b=n(92574),E=n(41958),x=n(65879);let f=(()=>{var t;class A{}return(t=A).\u0275fac=function(U){return new(U||t)},t.\u0275cmp=x.Xpm({type:t,selectors:[["worklenz-project-updates-input"]],standalone:!0,features:[x.jDz],decls:0,vars:0,template:function(U,B){},dependencies:[z.ez,e.u5,y.sL,M.U5,I.o7,b.zf,E.vG,e.UX,O.Gl],changeDetection:0}),A})()},93302:(W,Z,n)=>{n.d(Z,{r:()=>O});var z=n(26857),e=n(10708),y=n(69649),M=n(65879),I=n(69862);let O=(()=>{var b;class E extends z.P{constructor(f){super(),this.http=f,this.root=`${this.API_BASE_URL}/project-members`}create(f){const t=(0,y.UK)({current_project_id:f.project_id});return this._post(this.http,`${this.root}${t}`,f)}createByEmail(f){return this._post(this.http,`${this.root}/invite`,f)}getByProjectId(f){return this._get(this.http,`${this.root}/${f}`)}deleteById(f,t){const A=(0,y.UK)({current_project_id:t});return(0,e.n)(this.http.delete(`${this.root}/${f}${A}`))}}return(b=E).\u0275fac=function(f){return new(f||b)(M.LFG(I.eN))},b.\u0275prov=M.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),E})()},38125:(W,Z,n)=>{n.d(Z,{q6:()=>H});var z=n(49388),e=n(62831),y=n(96814),M=n(65879),I=n(8324);let H=(()=>{var r;class h{}return(r=h).\u0275fac=function(P){return new(P||r)},r.\u0275mod=M.oAB({type:r}),r.\u0275inj=M.cJS({imports:[z.vT,y.ez,I.T,e.ud]}),h})()},12996:(W,Z,n)=>{n.d(Z,{A2:()=>J});var z=n(65879),e=n(49388),y=n(96814),M=n(8324),I=n(62831);let b=(()=>{var s;class g{}return(s=g).\u0275fac=function(o){return new(o||s)},s.\u0275mod=z.oAB({type:s}),s.\u0275inj=z.cJS({imports:[y.ez]}),g})(),J=(()=>{var s;class g{}return(s=g).\u0275fac=function(o){return new(o||s)},s.\u0275mod=z.oAB({type:s}),s.\u0275inj=z.cJS({imports:[e.vT,y.ez,I.ud,M.T,b]}),g})()},96494:(W,Z,n)=>{n.d(Z,{m:()=>B});var z=n(65879),e=n(49388),y=n(96814),M=n(41958),I=n(62595),O=n(8324);let B=(()=>{var C;class w{}return(C=w).\u0275fac=function(D){return new(D||C)},C.\u0275mod=z.oAB({type:C}),C.\u0275inj=z.cJS({imports:[e.vT,y.ez,M.vG,I.PV,O.T]}),w})()}}]);