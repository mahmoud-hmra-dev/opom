"use strict";(self.webpackChunkworklenz=self.webpackChunkworklenz||[]).push([[931],{82931:(B,h,n)=>{n.r(h),n.d(h,{CategoriesModule:()=>W});var C=n(96814),z=n(52787),m=n(15861),v=n(21406),c=n(69649),t=n(65879),_=n(90586),l=n(53980),T=n(9172),$=n(72042),A=n(73460),x=n(62787),M=n(82962),Z=n(24139),d=n(13740),F=n(55695),J=n(96109),y=n(92574),O=n(42840),L=n(70855),D=n(41958),P=n(62595),S=n(3599),p=n(60095),f=n(20824);function E(e,s){if(1&e){const a=t.EpF();t.TgZ(0,"li",17),t.NdJ("click",function(){const i=t.CHM(a).$implicit,g=t.oxw().$implicit,u=t.oxw();return t.KtG(u.updateColorCode(g.id,i))}),t.TgZ(1,"nz-tag",18),t._uU(2),t.qZA()()}if(2&e){const a=s.$implicit,o=t.oxw().$implicit;t.xp6(1),t.Q6J("nzColor",a),t.xp6(1),t.Oqu(o.name)}}function Q(e,s){if(1&e){const a=t.EpF();t.TgZ(0,"tr",8)(1,"td")(2,"nz-tag",9),t._uU(3),t.qZA(),t.TgZ(4,"nz-dropdown-menu",null,10)(6,"ul",11),t.YNc(7,E,3,2,"li",12),t.qZA()()(),t.TgZ(8,"td"),t._uU(9),t.qZA(),t.TgZ(10,"td",13)(11,"div",14)(12,"nz-space")(13,"button",15),t.NdJ("click",function(){const i=t.CHM(a).$implicit,g=t.oxw();return t.KtG(g.deleteCategory(i))}),t._UZ(14,"span",16),t.qZA()()()()()}if(2&e){const a=s.$implicit,o=t.MAs(5),r=t.oxw();t.xp6(2),t.Q6J("nzColor",a.color_code)("nzDropdownMenu",o)("nzTooltipTitle","Click to change color")("nzTrigger","click"),t.xp6(1),t.Oqu(a.name),t.xp6(4),t.Q6J("ngForOf",r.colorCodes),t.xp6(2),t.Oqu(a.usage),t.xp6(4),t.Q6J("nzSize","small")("nzTooltipPlacement","top")("nzTooltipTitle","Delete")("disabled",(a.usage||0)>0)("nzType","default")}}function U(e,s){1&e&&t._UZ(0,"span",24)}function N(e,s){if(1&e){const a=t.EpF();t.TgZ(0,"form",20)(1,"nz-input-group",21)(2,"input",22),t.NdJ("ngModelChange",function(r){t.CHM(a);const i=t.oxw(2);return t.KtG(i.labelsSearch=r)})("ngModelChange",function(r){t.CHM(a);const i=t.oxw(2);return t.KtG(i.searchCategories(r))}),t.qZA()(),t.YNc(3,U,1,0,"ng-template",null,23,t.W1O),t.qZA()}if(2&e){const a=t.MAs(4),o=t.oxw(2);t.Q6J("nzLayout","vertical"),t.xp6(1),t.Q6J("nzSuffix",a),t.xp6(1),t.Q6J("ngModel",o.labelsSearch)}}function Y(e,s){1&e&&(t.TgZ(0,"nz-space"),t.YNc(1,N,5,3,"form",19),t.qZA())}const j=function(){return{rows:5}},I=[{path:"",component:(()=>{var e;class s{constructor(o,r,i,g,u){this.app=o,this.api=r,this.searchPipe=i,this.cdr=g,this.menu=u,this.colorCodes=v.lD,this.categories=[],this.filteredCategories=[],this.loading=!1,this.labelsSearch=null,this.app.setTitle("Manage Categories")}ngOnInit(){this.get()}trackByFn(o,r){return r.id}get(){var o=this;return(0,m.Z)(function*(){try{o.loading=!0;const r=yield o.api.get();r.done&&(o.categories=r.body,o.filteredCategories=o.categories),o.loading=!1}catch(r){o.loading=!1,(0,c.tu)(r)}o.cdr.detectChanges()})()}deleteCategory(o){var r=this;return(0,m.Z)(function*(){if(o?.id){try{r.loading=!0,(yield r.api.deleteById(o.id)).done&&r.get(),r.loading=!1}catch(i){r.loading=!1,(0,c.tu)(i)}r.cdr.detectChanges()}})()}updateColorCode(o,r){var i=this;return(0,m.Z)(function*(){if(o&&r)try{if((yield i.api.updateColor(o,r)).done){const u=i.categories.find(G=>G.id===o);u&&(u.color_code=r),i.cdr.markForCheck()}}catch(g){(0,c.tu)(g)}})()}searchCategories(o){this.filteredCategories=this.searchPipe.transform(this.categories,o||null),this.cdr.markForCheck()}}return(e=s).\u0275fac=function(o){return new(o||e)(t.Y36(_.z),t.Y36(l.s),t.Y36(T.g),t.Y36(t.sBO),t.Y36($.h))},e.\u0275cmp=t.Xpm({type:e,selectors:[["worklenz-categories"]],decls:14,vars:15,consts:[[3,"nzExtra"],[3,"nzActive","nzLoading","nzParagraph"],[1,"custom-table",3,"nzData","nzLoading","nzNoResult","nzPaginationType","nzSize"],["table",""],["scope","col",3,"nzWidth","nzAlign"],["scope","col","colspan","2",3,"nzAlign"],["class","actions-row",4,"ngFor","ngForOf","ngForTrackBy"],["actionsTemplate",""],[1,"actions-row"],["nz-dropdown","","nz-tooltip","",1,"m-0",2,"cursor","pointer",3,"nzColor","nzDropdownMenu","nzTooltipTitle","nzTrigger"],["colorDropdown","nzDropdownMenu"],["nz-menu","","nzSelectable","",2,"max-height","200px","overflow","hidden","overflow-y","auto"],["nz-menu-item","",3,"click",4,"ngFor","ngForOf"],["nzAlign","center",1,"actions-col"],[1,"actions"],["nz-button","","nz-tooltip","",3,"nzSize","nzTooltipPlacement","nzTooltipTitle","disabled","nzType","click"],["nz-icon","","nzType","delete"],["nz-menu-item","",3,"click"],[1,"m-0","w-100",3,"nzColor"],["nz-form","",3,"nzLayout",4,"nzSpaceItem"],["nz-form","",3,"nzLayout"],[3,"nzSuffix"],["nz-input","","name","search","placeholder","Search by name","type","text",3,"ngModel","ngModelChange"],["suffixIconSearch",""],["nz-icon","","nzType","search"]],template:function(o,r){if(1&o&&(t.TgZ(0,"nz-card",0)(1,"nz-skeleton",1)(2,"nz-table",2,3)(4,"thead")(5,"tr")(6,"th",4),t._uU(7,"Category"),t.qZA(),t.TgZ(8,"th",5),t._uU(9,"Associated Projects"),t.qZA()()(),t.TgZ(10,"tbody"),t.YNc(11,Q,15,12,"tr",6),t.qZA()()()(),t.YNc(12,Y,2,0,"ng-template",null,7,t.W1O)),2&o){const i=t.MAs(3),g=t.MAs(13);t.Q6J("nzExtra",g),t.xp6(1),t.Q6J("nzActive",!0)("nzLoading",r.loading)("nzParagraph",t.DdM(14,j)),t.xp6(1),t.Q6J("nzData",r.filteredCategories)("nzLoading",r.loading)("nzNoResult","Categories can be created while updating or creating projects.")("nzPaginationType","small")("nzSize","small"),t.xp6(4),t.Q6J("nzWidth","300px")("nzAlign","left"),t.xp6(2),t.Q6J("nzAlign","left"),t.xp6(3),t.Q6J("ngForOf",i.data)("ngForTrackBy",r.trackByFn)}},dependencies:[C.sg,A.wO,A.r9,x.cm,x.RR,M.bd,Z.ng,d.N8,d.Uo,d._C,d.Om,d.p0,d.$Z,d.UX,F.j,J.SY,y.NU,y.$1,O.ix,L.w,D.dQ,P.Ls,S.Lr,p._Y,p.Fj,p.JJ,p.JL,p.On,p.F,f.Zp,f.gB,f.ke]}),s})()}];let R=(()=>{var e;class s{}return(e=s).\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[z.Bz.forChild(I),z.Bz]}),s})();var K=n(39787);let W=(()=>{var e;class s{}return(e=s).\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[C.ez,R,x.b1,M.vh,Z.H0,d.HQ,F.X,J.cg,y.zf,O.sL,P.PV,S.U5,K.l,p.u5,f.o7]}),s})()},53980:(B,h,n)=>{n.d(h,{s:()=>v});var C=n(26857),z=n(65879),m=n(69862);let v=(()=>{var c;class t extends C.P{constructor(l){super(),this.http=l,this.root=`${this.API_BASE_URL}/project-categories`}create(l){return this._post(this.http,this.root,l)}get(){return this._get(this.http,`${this.root}`)}getByTeamId(l){return this._get(this.http,`${this.root}/${l}`)}getByOrg(){return this._get(this.http,`${this.root}/org-categories`)}updateColor(l,T){return this._put(this.http,`${this.root}/${l}`,{color:T})}deleteById(l){return this._delete(this.http,`${this.root}/${l}`)}}return(c=t).\u0275fac=function(l){return new(l||c)(z.LFG(m.eN))},c.\u0275prov=z.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),t})()}}]);