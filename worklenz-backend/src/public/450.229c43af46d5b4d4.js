"use strict";(self.webpackChunkworklenz=self.webpackChunkworklenz||[]).push([[450],{3450:(B,k,s)=>{s.r(k),s.d(k,{AuthModule:()=>se});var T=s(96814),o=s(52787),z=s(15861),a=s(60095),w=s(69649),h=s(21406),e=s(65879),C=s(90586),P=s(18218),b=s(9435),y=s(10095),d=s(3599),_=s(20824),S=s(62595),A=s(42840),M=s(70855),O=s(41958),Q=s(62612);const J=["emailInput"];function U(r,u){if(1&r){const i=e.EpF();e.TgZ(0,"span",22),e.NdJ("click",function(){e.CHM(i);const n=e.oxw(2);return e.KtG(n.passwordVisible=!n.passwordVisible)}),e.qZA()}if(2&r){const i=e.oxw(2);e.Q6J("nzType",i.passwordVisible?"eye-invisible":"eye")}}const p=function(){return["/auth/reset-password"]},g=function(){return["/auth/signup"]};function c(r,u){if(1&r){const i=e.EpF();e.ynx(0),e.TgZ(1,"div",1),e._UZ(2,"img",2),e.qZA(),e.TgZ(3,"div",3),e._uU(4," Log Into your account. "),e.qZA(),e.TgZ(5,"form",4),e.NdJ("submit",function(){e.CHM(i);const n=e.oxw();return e.KtG(n.login())}),e.TgZ(6,"nz-form-item")(7,"nz-form-control",5)(8,"nz-input-group",6),e._UZ(9,"input",7,8),e.qZA()()(),e.TgZ(11,"nz-form-item")(12,"nz-form-control",5)(13,"nz-input-group",9),e._UZ(14,"input",10),e.qZA(),e.YNc(15,U,1,1,"ng-template",null,11,e.W1O),e.qZA()(),e.TgZ(17,"div",12)(18,"div",13)(19,"label",14)(20,"span"),e._uU(21,"Remember me"),e.qZA()()(),e.TgZ(22,"div",13)(23,"a",15),e._uU(24,"Forgot password?"),e.qZA()()(),e.TgZ(25,"button",16),e._uU(26," Log in "),e.qZA(),e.TgZ(27,"div",17),e._uU(28," OR "),e.qZA(),e.TgZ(29,"button",18),e.NdJ("click",function(){e.CHM(i);const n=e.oxw();return e.KtG(n.signInWithGoogle())}),e._UZ(30,"img",19),e._uU(31," Sign in with Google "),e.qZA(),e._UZ(32,"nz-form-item"),e.TgZ(33,"nz-form-item",20)(34,"nz-form-control")(35,"p",20),e._uU(36," Don\u2019t have an account? "),e.TgZ(37,"a",21),e._uU(38,"Sign Up"),e.qZA()()()()(),e.BQk()}if(2&r){const i=e.MAs(16),t=e.oxw();e.xp6(2),e.Q6J("ngSrc","/assets/images/logo.png"),e.xp6(3),e.Q6J("formGroup",t.form),e.xp6(2),e.Q6J("nzErrorTip","Please input your email!"),e.xp6(1),e.Q6J("nzPrefixIcon","user")("nzSize","large"),e.xp6(1),e.Q6J("formControlName","email"),e.xp6(3),e.Q6J("nzErrorTip","Please input your Password!"),e.xp6(1),e.Q6J("nzSuffix",i)("nzPrefixIcon","lock")("nzSize","large"),e.xp6(1),e.Q6J("formControlName","password")("type",t.passwordVisible?"text":"password"),e.xp6(4),e.Q6J("nzSpan",12),e.xp6(1),e.Q6J("formControlName","remember"),e.xp6(3),e.Q6J("nzSpan",12),e.xp6(1),e.Q6J("routerLink",e.DdM(26,p)),e.xp6(2),e.Q6J("nzLoading",t.loading)("nzType","primary")("nzBlock",!0)("nzSize","large"),e.xp6(4),e.Q6J("nzLoading",t.loadingGoogle)("nzType","default")("nzBlock",!0)("nzSize","large"),e.xp6(1),e.Q6J("ngSrc","/assets/images/google-icon.png"),e.xp6(7),e.Q6J("routerLink",e.DdM(27,g))}}let f=(()=>{var r;class u{set projectId(t){t?localStorage.setItem(h.H4,t):localStorage.removeItem(h.H4)}get projectId(){return localStorage.getItem(h.H4)}constructor(t,n,l,v,x,E,Y){this.app=t,this.router=n,this.api=l,this.auth=v,this.route=x,this.fb=E,this.ngZone=Y,this.validating=!0,this.loading=!1,this.passwordVisible=!1,this.loadingGoogle=!1,this.teamId=null,this.app.setTitle("Login"),this.teamId=this.route.snapshot.queryParamMap.get("team"),this.projectId=this.route.snapshot.queryParamMap.get("project"),this.form=this.fb.group({email:[null,[a.kI.required,a.kI.email]],password:[null,[a.kI.required]],remember:[!1]})}get teamIdQueryParam(){const t=[`team=${this.teamId}`];return this.projectId&&t.push(`project=${this.projectId}`),this.teamId?`?${t.join("&")}`:""}ngOnInit(){var t=this;return(0,z.Z)(function*(){const n=t.auth.getCurrentSession();!n||n.setup_completed?(yield t.authorize())||(t.validating=!1):t.router.navigate(["/opom/setup"])})()}ngAfterViewInit(){this.ngZone.runOutsideAngular(()=>{setTimeout(()=>{this.emailInput?.nativeElement.focus()},250)})}authorize(){var t=this;return(0,z.Z)(function*(){try{const n=yield t.api.authorize();return!!n.authenticated&&(t.auth.setCurrentSession(n.user),yield t.router.navigate(["/opom/home"]),!0)}catch(n){return(0,w.tu)(n),!1}})()}login(){var t=this;return(0,z.Z)(function*(){if(!t.loading)if(t.form.valid){t.loading=!0;try{yield t.api.login({email:t.form.controls.email.value,password:t.form.controls.password.value,team_id:t.teamId||void 0,project_id:t.projectId||void 0});const n=yield t.authorize();t.loading=!1,n?yield t.router.navigate(["/authenticate"]):t.app.notify("Login failed!","Please check your email & password and retry.",!1)}catch(n){(0,w.tu)(n),t.loading=!1,t.app.notify("Login failed!","An unknown error has occurred. Please try again.",!1)}}else Object.values(t.form.controls).forEach(n=>{n.invalid&&(n.markAsDirty(),n.updateValueAndValidity({onlySelf:!0}))})})()}signInWithGoogle(){this.loadingGoogle||(this.loadingGoogle=!0,this.ngZone.runOutsideAngular(()=>{setTimeout(()=>{window.location.href=`/secure/google${this.teamIdQueryParam}`},1e3)}))}}return(r=u).\u0275fac=function(t){return new(t||r)(e.Y36(C.z),e.Y36(o.F0),e.Y36(P.Q),e.Y36(b.e),e.Y36(o.gz),e.Y36(a.qu),e.Y36(e.R0b))},r.\u0275cmp=e.Xpm({type:r,selectors:[["worklenz-login"]],viewQuery:function(t,n){if(1&t&&e.Gf(J,5),2&t){let l;e.iGM(l=e.CRH())&&(n.emailInput=l.first)}},decls:1,vars:1,consts:[[4,"ngIf"],[1,"text-center"],["alt","opom","height","50","width","235",3,"ngSrc"],[1,"text-muted","mb-4","mt-1","text-center"],["nz-form","",1,"login-form",3,"formGroup","submit"],[3,"nzErrorTip"],[3,"nzPrefixIcon","nzSize"],["nz-input","","placeholder","Email","type","email",3,"formControlName"],["emailInput",""],[3,"nzSuffix","nzPrefixIcon","nzSize"],["nz-input","","placeholder","Password",3,"formControlName","type"],["suffixTemplate",""],["nz-row","",1,"login-form-margin"],["nz-col","",3,"nzSpan"],["nz-checkbox","",3,"formControlName"],[1,"login-form-forgot",3,"routerLink"],["nz-button","",1,"mt-1",3,"nzLoading","nzType","nzBlock","nzSize"],[1,"text-center","mt-2"],["nz-button","","type","button",1,"mt-1",3,"nzLoading","nzType","nzBlock","nzSize","click"],["alt","opom","width","18","height","18",1,"me-2",3,"ngSrc"],[1,"mb-0"],["rel","noopener",3,"routerLink"],["nz-icon","",3,"nzType","click"]],template:function(t,n){1&t&&e.YNc(0,c,39,28,"ng-container",0),2&t&&e.Q6J("ngIf",!n.validating)},dependencies:[T.O5,o.rH,a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u,y.t3,y.SK,d.Lr,d.Nx,d.Fd,_.Zp,_.gB,_.ke,S.Ls,A.ix,M.w,O.dQ,Q.Ie,T.Zd],styles:[".login-form-margin[_ngcontent-%COMP%]{margin-bottom:16px}.login-form-forgot[_ngcontent-%COMP%]{float:right}.login-form-button[_ngcontent-%COMP%]{width:100%}"]}),u})();var m=s(8083),Z=s(82669);const I=["nameInput"];function L(r,u){if(1&r&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&r){const i=e.oxw();e.xp6(1),e.hij("(",i.passwordStrength.text,")")}}function N(r,u){if(1&r){const i=e.EpF();e.TgZ(0,"span",27),e.NdJ("click",function(){e.CHM(i);const n=e.oxw();return e.KtG(n.passwordVisible=!n.passwordVisible)}),e.qZA()}if(2&r){const i=e.oxw();e.Q6J("nzType",i.passwordVisible?"eye-invisible":"eye")}}function D(r,u){if(1&r&&(e.TgZ(0,"span",28),e._uU(1),e.qZA()),2&r){const i=e.oxw();e.Q6J("nzType","secondary"),e.xp6(1),e.Oqu(i.passwordPolicy)}}const q=function(){return["/auth/login"]};let j=(()=>{var r;class u{set projectId(t){t?localStorage.setItem(h.H4,t):localStorage.removeItem(h.H4)}get projectId(){return localStorage.getItem(h.H4)}get hasPassword(){return this.form.controls.password.valid}constructor(t,n,l,v,x,E){this.app=t,this.router=n,this.fb=l,this.api=v,this.route=x,this.ngZone=E,this.loading=!1,this.validating=!1,this.passwordVisible=!1,this.loadingGoogle=!1,this.email=null,this.name=null,this.teamId=null,this.teamMemberId=null,this.passwordStrength=null,this.passwordPolicy=h.QW,this.model=null,this.app.setTitle("Signup"),this.email=this.route.snapshot.queryParamMap.get("email"),this.name=this.route.snapshot.queryParamMap.get("name"),this.teamId=this.route.snapshot.queryParamMap.get("team"),this.teamMemberId=this.route.snapshot.queryParamMap.get("user"),this.projectId=this.route.snapshot.queryParamMap.get("project"),this.form=this.fb.group({name:[this.name,[a.kI.required]],email:[this.email,[a.kI.required,a.kI.email]],password:[null,[a.kI.required]]}),this.form.controls.password.valueChanges.subscribe(Y=>{this.checkPasswordStrength(Y)})}get invitationQueryParams(){const t=[`team=${this.teamId}`,`teamMember=${this.teamMemberId}`];return this.projectId&&t.push(`project=${this.projectId}`),this.teamId&&this.teamMemberId?`?${t.join("&")}`:""}ngAfterViewInit(){this.checkPasswordStrength(this.form.value.password),this.ngZone.runOutsideAngular(()=>{setTimeout(()=>{this.nameInput?.nativeElement.focus()},250)})}validate(){var t=this;return(0,z.Z)(function*(){if(!t.validating)if(t.form.valid){t.validating=!0;try{const n={name:t.form.controls.name.value,email:t.form.controls.email.value,password:t.form.controls.password.value},l=yield t.api.signupCheck(n);t.validating=!1,l.done&&(t.model=n,t.signupWithEmail())}catch(n){(0,w.tu)(n),t.validating=!1,t.app.notify("Signup failed!","An unknown error has occurred. Please try again.",!1)}}else t.app.displayErrorsOf(t.form)})()}signUpWithGoogle(){this.loadingGoogle=!0,this.ngZone.runOutsideAngular(()=>{setTimeout(()=>{window.location.href=`/secure/google${this.invitationQueryParams}`},1e3)})}signupWithEmail(){var t=this;return(0,z.Z)(function*(){if(!t.loading&&t.model)try{t.loading=!0,t.model.team_name=t.model?.name,t.teamId&&(t.model.team_id=t.teamId),t.teamMemberId&&(t.model.team_member_id=t.teamMemberId),t.projectId&&(t.model.project_id=t.projectId),yield t.api.signup(t.model),(yield t.api.authorize()).authenticated&&(yield t.router.navigate(["/authenticate"])),t.loading=!1}catch{t.loading=!1}})()}checkPasswordStrength(t){var n=this;return(0,z.Z)(function*(){try{const l=yield n.api.checkPasswordStrength(t);l.done&&(n.passwordStrength=l.body)}catch{}})()}}return(r=u).\u0275fac=function(t){return new(t||r)(e.Y36(C.z),e.Y36(o.F0),e.Y36(a.qu),e.Y36(P.Q),e.Y36(o.gz),e.Y36(e.R0b))},r.\u0275cmp=e.Xpm({type:r,selectors:[["worklenz-signup"]],viewQuery:function(t,n){if(1&t&&e.Gf(I,5),2&t){let l;e.iGM(l=e.CRH())&&(n.nameInput=l.first)}},decls:54,vars:28,consts:[[1,"text-center"],["alt","opom","height","50","width","235",3,"ngSrc"],[1,"text-muted","mb-4","mt-1","text-center"],[3,"nzSpinning"],["nz-form","",1,"login-form",3,"formGroup","submit"],[3,"nzErrorTip"],["for","full-name",1,"d-block","mb-1"],[3,"nzPrefixIcon","nzSize"],["id","full-name","nz-input","","placeholder","Enter your full name","type","text",3,"formControlName"],["nameInput",""],["for","email",1,"d-block","mb-1"],["id","email","nz-input","","placeholder","Enter your email","type","email",3,"formControlName"],[3,"nzErrorTip","nzExtra"],["for","password",1,"d-block","mb-1"],[4,"ngIf"],[3,"nzSuffix","nzPrefixIcon","nzSize"],["nz-input","","id","password","placeholder","Enter a strong password",3,"formControlName","type"],["suffixTemplate",""],["passwordNote",""],[1,"mb-0"],["href","/privacy-policy","target","_blank","rel","noopener"],["href","/terms-of-use"],["nz-button","","nzBlock","",1,"mt-1",3,"nzLoading","nzType","nzSize"],[1,"text-center","mt-2"],["nz-button","","nzBlock","","type","button",1,"mt-1",3,"nzLoading","nzType","nzSize","click"],["alt","opom","width","18","height","18",1,"me-2",3,"ngSrc"],["rel","noopener",3,"routerLink"],["nz-icon","",3,"nzType","click"],["nz-typography","",2,"font-size","12px",3,"nzType"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0),e._UZ(1,"img",1),e.qZA(),e.TgZ(2,"div",2),e._uU(3,"Create your account."),e.qZA(),e.TgZ(4,"nz-spin",3)(5,"form",4),e.NdJ("submit",function(){return n.validate()}),e.TgZ(6,"nz-form-item")(7,"nz-form-control",5)(8,"label",6),e._uU(9,"Full name"),e.qZA(),e.TgZ(10,"nz-input-group",7),e._UZ(11,"input",8,9),e.qZA()()(),e.TgZ(13,"nz-form-item")(14,"nz-form-control",5)(15,"label",10),e._uU(16,"Email"),e.qZA(),e.TgZ(17,"nz-input-group",7),e._UZ(18,"input",11),e.qZA()()(),e.TgZ(19,"nz-form-item")(20,"nz-form-control",12)(21,"label",13),e._uU(22," Password "),e.YNc(23,L,2,1,"span",14),e.qZA(),e.TgZ(24,"nz-input-group",15),e._UZ(25,"input",16),e.qZA(),e.YNc(26,N,1,1,"ng-template",null,17,e.W1O),e.qZA()(),e.YNc(28,D,2,2,"ng-template",null,18,e.W1O),e.TgZ(30,"nz-form-item")(31,"nz-form-control")(32,"p",19),e._uU(33," By signing up, you will agree to our "),e.TgZ(34,"a",20),e._uU(35,"Privacy Policy"),e.qZA(),e._uU(36," and "),e.TgZ(37,"a",21),e._uU(38,"Terms of Use"),e.qZA(),e._uU(39,". "),e.qZA()()(),e.TgZ(40,"button",22),e._uU(41,"Sign up "),e.qZA(),e.TgZ(42,"div",23),e._uU(43,"OR"),e.qZA(),e.TgZ(44,"button",24),e.NdJ("click",function(){return n.signUpWithGoogle()}),e._UZ(45,"img",25),e._uU(46," Sign up with Google "),e.qZA(),e._UZ(47,"nz-form-item"),e.TgZ(48,"nz-form-item",19)(49,"nz-form-control")(50,"p",19),e._uU(51," Already have an account? "),e.TgZ(52,"a",26),e._uU(53,"Log In"),e.qZA()()()()()()),2&t){const l=e.MAs(27),v=e.MAs(29);e.xp6(1),e.Q6J("ngSrc","/assets/images/logo.png"),e.xp6(3),e.Q6J("nzSpinning",n.loading||n.validating),e.xp6(1),e.Q6J("formGroup",n.form),e.xp6(2),e.Q6J("nzErrorTip","Please input your name!"),e.xp6(3),e.Q6J("nzPrefixIcon","user")("nzSize","large"),e.xp6(1),e.Q6J("formControlName","name"),e.xp6(3),e.Q6J("nzErrorTip","Please input your email!"),e.xp6(3),e.Q6J("nzPrefixIcon","mail")("nzSize","large"),e.xp6(1),e.Q6J("formControlName","email"),e.xp6(2),e.Q6J("nzErrorTip","Please input your Password!")("nzExtra",v),e.xp6(3),e.Q6J("ngIf",n.hasPassword&&n.passwordStrength),e.xp6(1),e.Q6J("nzSuffix",l)("nzPrefixIcon","lock")("nzSize","large"),e.xp6(1),e.Q6J("formControlName","password")("type",n.passwordVisible?"text":"password"),e.xp6(15),e.Q6J("nzLoading",n.loading)("nzType","primary")("nzSize","large"),e.xp6(4),e.Q6J("nzLoading",n.loadingGoogle)("nzType","default")("nzSize","large"),e.xp6(1),e.Q6J("ngSrc","/assets/images/google-icon.png"),e.xp6(7),e.Q6J("routerLink",e.DdM(27,q))}},dependencies:[T.O5,o.rH,a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u,y.t3,y.SK,d.Lr,d.Nx,d.Fd,_.Zp,_.gB,_.ke,S.Ls,A.ix,M.w,O.dQ,m.ZU,Z.W,T.Zd]}),u})(),F=(()=>{var r;class u{constructor(t,n,l,v){this.auth=t,this.router=n,this.route=l,this.app=v;const x=this.route.snapshot.queryParamMap.get("error");x&&(this.displayError(x),this.removeErrorQueryParam())}ngOnInit(){var t=this;return(0,z.Z)(function*(){t.auth.isAuthenticated()&&(yield t.router.navigate(["/opom"]))})()}displayError(t){this.app.notify("Authentication failed!",t,!1)}removeErrorQueryParam(){this.router.navigate([],{relativeTo:this.route,queryParams:{}})}}return(r=u).\u0275fac=function(t){return new(t||r)(e.Y36(b.e),e.Y36(o.F0),e.Y36(o.gz),e.Y36(C.z))},r.\u0275cmp=e.Xpm({type:r,selectors:[["worklenz-layout"]],decls:10,vars:0,consts:[[1,"justify-content-center","py-5","position-relative"],[1,"row","w-100","mx-0","auth-page"],[1,"col-md-12","col-sm-8","col-xl-3","mx-auto","pe-5","ps-5","my-5","bg-white","w-360","border-radius-4"],[1,"row"],[1,"col-md-12"],[1,"py-5"],["aria-labelledby","auth-tab-content"],[1,"bg-ant-grey"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6),e._UZ(7,"router-outlet"),e.qZA()()()()()(),e._UZ(8,"div",7),e.qZA(),e._UZ(9,"div",7))},dependencies:[o.lC],styles:[".bg-ant-grey[_ngcontent-%COMP%]{background:#FAFAFA;position:absolute;inset:0;z-index:0}.w-360[_ngcontent-%COMP%]{width:450px;z-index:1}.border-radius-4[_ngcontent-%COMP%]{border:1px solid #FAFAFA;border-radius:4px}@media (max-width: 660px){.w-360[_ngcontent-%COMP%]{width:90%}}"]}),u})();var R=s(65797);const G=["emailInput"];function V(r,u){1&r&&e._UZ(0,"nz-result",11)}const W=function(){return["/auth/login"]};function K(r,u){if(1&r){const i=e.EpF();e.TgZ(0,"div")(1,"div",12),e._uU(2," Please enter your email address. You will receive a link to create a new password via email. "),e.qZA(),e.TgZ(3,"div",13)(4,"form",14),e.NdJ("submit",function(){e.CHM(i);const n=e.oxw();return e.KtG(n.resetPassword())}),e.TgZ(5,"nz-form-item")(6,"nz-form-control",15)(7,"nz-input-group",16),e._UZ(8,"input",17,18),e.qZA()()(),e.TgZ(10,"button",19),e._uU(11," Reset Password "),e.qZA(),e.TgZ(12,"div",20),e._uU(13," OR "),e.qZA(),e.TgZ(14,"button",21),e._uU(15," Return to Login "),e.qZA()()()()}if(2&r){const i=e.oxw();e.xp6(4),e.Q6J("formGroup",i.form),e.xp6(4),e.Q6J("formControlName","email"),e.xp6(2),e.Q6J("nzLoading",i.loading)("nzType","primary"),e.xp6(4),e.Q6J("routerLink",e.DdM(6,W))("nzType","default")}}function $(r,u){if(1&r){const i=e.EpF();e.TgZ(0,"span",20),e.NdJ("click",function(){e.CHM(i);const n=e.oxw();return e.KtG(n.passwordVisible=!n.passwordVisible)}),e.qZA()}if(2&r){const i=e.oxw();e.Q6J("nzType",i.passwordVisible?"eye-invisible":"eye")}}function X(r,u){if(1&r&&(e.TgZ(0,"span",21),e._uU(1),e.qZA()),2&r){const i=e.oxw();e.Q6J("nzType","secondary"),e.xp6(1),e.Oqu(i.passwordPolicy)}}const ee=function(){return["/auth/reset-password"]},te=[{path:"",component:F,children:[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:f},{path:"signup",component:j}]},{path:"",children:[{path:"reset-password",component:(()=>{var r;class u{constructor(t,n,l,v,x,E){this.app=t,this.router=n,this.api=l,this.auth=v,this.route=x,this.fb=E,this.loading=!1,this.informationSent=!1,this.teamId=null,this.app.setTitle("Reset Password"),this.teamId=this.route.snapshot.queryParamMap.get("team"),this.form=this.fb.group({email:[null,[a.kI.required,a.kI.email]]})}ngOnInit(){var t=this;return(0,z.Z)(function*(){yield t.authorize()})()}authorize(){var t=this;return(0,z.Z)(function*(){try{const n=yield t.api.authorize();return!!n.authenticated&&(t.auth.setCurrentSession(n.user),yield t.router.navigate(["/opom/home"]),!0)}catch(n){return(0,w.tu)(n),!1}})()}resetPassword(){var t=this;return(0,z.Z)(function*(){if(!t.loading)if(t.form.valid){t.loading=!0;try{(yield t.api.resetPassword({email:t.form.controls.email.value})).done&&(t.informationSent=!0),t.loading=!1}catch(n){(0,w.tu)(n),t.loading=!1,t.app.notify("Reset password failed!","An unknown error has occurred. Please try again.",!1)}}else t.app.displayErrorsOf(t.form)})()}}return(r=u).\u0275fac=function(t){return new(t||r)(e.Y36(C.z),e.Y36(o.F0),e.Y36(P.Q),e.Y36(b.e),e.Y36(o.gz),e.Y36(a.qu))},r.\u0275cmp=e.Xpm({type:r,selectors:[["worklenz-reset-password"]],viewQuery:function(t,n){if(1&t&&e.Gf(G,5),2&t){let l;e.iGM(l=e.CRH())&&(n.emailInput=l.first)}},decls:11,vars:2,consts:[[1,"d-flex","align-items-center","justify-content-center"],[1,"row","w-100","mx-0","auth-page"],[1,"col-md-5","col-sm-8","col-xl-3","mx-auto","pe-5","ps-5"],[1,"w-360"],[1,"row"],[1,"col-md-12"],[1,"py-5"],[1,"text-center"],["alt","opom","height","50","src","/assets/images/logo.png"],["nzStatus","success","nzTitle","Reset instruction sent!","nzSubTitle","Reset information has been sent to your email. Please check your email.",4,"ngIf"],[4,"ngIf"],["nzStatus","success","nzTitle","Reset instruction sent!","nzSubTitle","Reset information has been sent to your email. Please check your email."],[1,"text-muted","mb-4","mt-1","text-center"],["aria-labelledby","auth-tab-content"],["nz-form","",1,"login-form",3,"formGroup","submit"],["nzErrorTip","Please enter your email!"],["nzPrefixIcon","user","nzSize","large"],["nz-input","","placeholder","Enter your email","type","email",3,"formControlName"],["emailInput",""],["nz-button","","nzBlock","","nzSize","large",1,"mt-1",3,"nzLoading","nzType"],[1,"text-center","mt-2"],["nz-button","","nzBlock","","nzSize","large","type","button",1,"mt-1",3,"routerLink","nzType"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7),e._UZ(8,"img",8),e.qZA(),e.YNc(9,V,1,0,"nz-result",9),e.YNc(10,K,16,7,"div",10),e.qZA()()()()()()()),2&t&&(e.xp6(9),e.Q6J("ngIf",n.informationSent),e.xp6(1),e.Q6J("ngIf",!n.informationSent))},dependencies:[T.O5,o.rH,a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u,y.t3,y.SK,d.Lr,d.Nx,d.Fd,_.Zp,_.gB,A.ix,M.w,O.dQ,R.ml]}),u})()},{path:"verify-reset-email/:user/:hash",component:(()=>{var r;class u{constructor(t,n,l,v,x){this.app=t,this.api=n,this.fb=l,this.route=v,this.router=x,this.hash="",this.user="",this.loading=!1,this.passwordVisible=!1,this.validating=!1,this.model={},this.passwordPolicy=h.QW,this.app.setTitle("Reset Password"),this.form=this.fb.group({password:[null,[a.kI.required]]})}ngOnInit(){this.route.paramMap.subscribe(t=>{this.hash=t.get("hash")||"",this.user=t.get("user")||""})}resetPassword(){var t=this;return(0,z.Z)(function*(){if(!t.validating)if(t.form.valid){t.validating=!0;try{const n={password:t.form.controls.password.value,hash:t.hash,user:t.user};(yield t.api.updateNewPassword(n)).done&&(yield t.router.navigate(["/auth/login"])),t.validating=!1}catch(n){(0,w.tu)(n),t.validating=!1,t.app.notify("Reset password failed!","An unknown error has occurred. Please try again.",!1)}}else t.app.displayErrorsOf(t.form)})()}}return(r=u).\u0275fac=function(t){return new(t||r)(e.Y36(C.z),e.Y36(P.Q),e.Y36(a.qu),e.Y36(o.gz),e.Y36(o.F0))},r.\u0275cmp=e.Xpm({type:r,selectors:[["worklenz-verify-reset-email"]],decls:27,vars:10,consts:[[1,"d-flex","align-items-center","justify-content-center"],[1,"row","w-100","mx-0","auth-page"],[1,"col-md-5","col-sm-8","col-xl-3","mx-auto","pe-5","ps-5"],[1,"w-360"],[1,"row"],[1,"col-md-12"],[1,"py-5"],[1,"text-center"],["alt","opom","height","50","src","/assets/images/logo.png"],[1,"text-muted","mb-4","mt-1","text-center"],["aria-labelledby","auth-tab-content"],["nz-form","",1,"login-form",3,"formGroup","submit"],["nzErrorTip","Please input your Password!",3,"nzExtra"],["nzPrefixIcon","lock","nzSize","large",3,"nzSuffix"],["nz-input","","placeholder","Enter your new password",3,"formControlName","type"],["suffixTemplate",""],["passwordNote",""],["nz-button","","nzBlock","","nzSize","large",1,"mt-1",3,"nzLoading","nzType"],[1,"text-center","mt-2"],["nz-button","","nzBlock","","nzSize","large","type","button",1,"mt-1",3,"routerLink","nzType"],["nz-icon","",3,"nzType","click"],["nz-typography","",2,"font-size","12px",3,"nzType"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7),e._UZ(8,"img",8),e.qZA(),e.TgZ(9,"div",9),e._uU(10," Enter your new password "),e.qZA(),e.TgZ(11,"div",10)(12,"form",11),e.NdJ("submit",function(){return n.resetPassword()}),e.TgZ(13,"nz-form-item")(14,"nz-form-control",12)(15,"nz-input-group",13),e._UZ(16,"input",14),e.qZA(),e.YNc(17,$,1,1,"ng-template",null,15,e.W1O),e.qZA()(),e.YNc(19,X,2,2,"ng-template",null,16,e.W1O),e.TgZ(21,"button",17),e._uU(22," Reset Password "),e.qZA(),e.TgZ(23,"div",18),e._uU(24," OR "),e.qZA(),e.TgZ(25,"button",19),e._uU(26," Resend reset email "),e.qZA()()()()()()()()()()),2&t){const l=e.MAs(18),v=e.MAs(20);e.xp6(12),e.Q6J("formGroup",n.form),e.xp6(2),e.Q6J("nzExtra",v),e.xp6(1),e.Q6J("nzSuffix",l),e.xp6(1),e.Q6J("formControlName","password")("type",n.passwordVisible?"text":"password"),e.xp6(5),e.Q6J("nzLoading",n.loading)("nzType","primary"),e.xp6(4),e.Q6J("routerLink",e.DdM(9,ee))("nzType","default")}},dependencies:[o.rH,a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u,y.t3,y.SK,d.Lr,d.Nx,d.Fd,_.Zp,_.gB,_.ke,S.Ls,A.ix,M.w,O.dQ,m.ZU]}),u})()},{path:"**",redirectTo:"login",pathMatch:"full"}]}];let ne=(()=>{var r;class u{}return(r=u).\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[o.Bz.forChild(te),o.Bz]}),u})();var oe=s(79382),re=s(96109),ie=s(57417),ae=s(48128);let se=(()=>{var r;class u{}return(r=u).\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[T.ez,ne,a.u5,a.UX,d.U5,_.o7,S.PV,A.sL,Q.Wr,m.ZJ,oe.we,re.cg,Z.j,R.XD,ie.$6,ae.W]}),u})()},57417:(B,k,s)=>{s.d(k,{$6:()=>U,lU:()=>Q});var T=s(97582),o=s(65879),z=s(64194),a=s(40874),w=s(27754),h=s(96109),e=s(331),C=s(49388),P=s(96814),b=s(69594),y=s(8324),d=s(85448);function _(p,g){if(1&p&&(o.ynx(0),o._uU(1),o.BQk()),2&p){const c=o.oxw(3);o.xp6(1),o.Oqu(c.nzTitle)}}function S(p,g){if(1&p&&(o.TgZ(0,"div",10),o.YNc(1,_,2,1,"ng-container",9),o.qZA()),2&p){const c=o.oxw(2);o.xp6(1),o.Q6J("nzStringTemplateOutlet",c.nzTitle)}}function A(p,g){if(1&p&&(o.ynx(0),o._uU(1),o.BQk()),2&p){const c=o.oxw(2);o.xp6(1),o.Oqu(c.nzContent)}}function M(p,g){if(1&p&&(o.TgZ(0,"div",2)(1,"div",3)(2,"div",4),o._UZ(3,"span",5),o.qZA(),o.TgZ(4,"div",6)(5,"div"),o.YNc(6,S,2,1,"div",7),o.TgZ(7,"div",8),o.YNc(8,A,2,1,"ng-container",9),o.qZA()()()()()),2&p){const c=o.oxw();o.ekj("ant-popover-rtl","rtl"===c.dir),o.Q6J("ngClass",c._classMap)("ngStyle",c.nzOverlayStyle)("@.disabled",!(null==c.noAnimation||!c.noAnimation.nzNoAnimation))("nzNoAnimation",null==c.noAnimation?null:c.noAnimation.nzNoAnimation)("@zoomBigMotion","active"),o.xp6(6),o.Q6J("ngIf",c.nzTitle),o.xp6(2),o.Q6J("nzStringTemplateOutlet",c.nzContent)}}let Q=(()=>{var p;class g extends h.Mg{getProxyPropertyMap(){return{nzPopoverBackdrop:["nzBackdrop",()=>this.nzPopoverBackdrop],...super.getProxyPropertyMap()}}constructor(f,m,Z,I,L,N){super(f,m,Z,I,L,N),this._nzModuleName="popover",this.trigger="hover",this.placement="top",this.nzPopoverBackdrop=!1,this.visibleChange=new o.vpe,this.componentRef=this.hostView.createComponent(J)}}return(p=g).\u0275fac=function(f){return new(f||p)(o.Y36(o.SBq),o.Y36(o.s_b),o.Y36(o._Vd),o.Y36(o.Qsj),o.Y36(e.P,9),o.Y36(a.jY))},p.\u0275dir=o.lG2({type:p,selectors:[["","nz-popover",""]],hostVars:2,hostBindings:function(f,m){2&f&&o.ekj("ant-popover-open",m.visible)},inputs:{arrowPointAtCenter:["nzPopoverArrowPointAtCenter","arrowPointAtCenter"],title:["nzPopoverTitle","title"],content:["nzPopoverContent","content"],directiveTitle:["nz-popover","directiveTitle"],trigger:["nzPopoverTrigger","trigger"],placement:["nzPopoverPlacement","placement"],origin:["nzPopoverOrigin","origin"],visible:["nzPopoverVisible","visible"],mouseEnterDelay:["nzPopoverMouseEnterDelay","mouseEnterDelay"],mouseLeaveDelay:["nzPopoverMouseLeaveDelay","mouseLeaveDelay"],overlayClassName:["nzPopoverOverlayClassName","overlayClassName"],overlayStyle:["nzPopoverOverlayStyle","overlayStyle"],nzPopoverBackdrop:"nzPopoverBackdrop"},outputs:{visibleChange:"nzPopoverVisibleChange"},exportAs:["nzPopover"],features:[o.qOj]}),(0,T.gn)([(0,w.yF)()],g.prototype,"arrowPointAtCenter",void 0),(0,T.gn)([(0,a.oS)()],g.prototype,"nzPopoverBackdrop",void 0),g})(),J=(()=>{var p;class g extends h.XK{constructor(f,m,Z){super(f,m,Z),this._prefix="ant-popover"}get hasBackdrop(){return"click"===this.nzTrigger&&this.nzBackdrop}isEmpty(){return(0,h.pu)(this.nzTitle)&&(0,h.pu)(this.nzContent)}}return(p=g).\u0275fac=function(f){return new(f||p)(o.Y36(o.sBO),o.Y36(C.Is,8),o.Y36(e.P,9))},p.\u0275cmp=o.Xpm({type:p,selectors:[["nz-popover"]],exportAs:["nzPopoverComponent"],features:[o.qOj],decls:2,vars:6,consts:[["cdkConnectedOverlay","","nzConnectedOverlay","",3,"cdkConnectedOverlayHasBackdrop","cdkConnectedOverlayOrigin","cdkConnectedOverlayPositions","cdkConnectedOverlayOpen","cdkConnectedOverlayPush","nzArrowPointAtCenter","overlayOutsideClick","detach","positionChange"],["overlay","cdkConnectedOverlay"],[1,"ant-popover",3,"ngClass","ngStyle","nzNoAnimation"],[1,"ant-popover-content"],[1,"ant-popover-arrow"],[1,"ant-popover-arrow-content"],["role","tooltip",1,"ant-popover-inner"],["class","ant-popover-title",4,"ngIf"],[1,"ant-popover-inner-content"],[4,"nzStringTemplateOutlet"],[1,"ant-popover-title"]],template:function(f,m){1&f&&(o.YNc(0,M,9,9,"ng-template",0,1,o.W1O),o.NdJ("overlayOutsideClick",function(I){return m.onClickOutside(I)})("detach",function(){return m.hide()})("positionChange",function(I){return m.onPositionChange(I)})),2&f&&o.Q6J("cdkConnectedOverlayHasBackdrop",m.hasBackdrop)("cdkConnectedOverlayOrigin",m.origin)("cdkConnectedOverlayPositions",m._positions)("cdkConnectedOverlayOpen",m._visible)("cdkConnectedOverlayPush",!0)("nzArrowPointAtCenter",m.nzArrowPointAtCenter)},dependencies:[P.mk,P.O5,P.PC,b.pI,y.f,d.hQ,e.P],encapsulation:2,data:{animation:[z.$C]},changeDetection:0}),g})(),U=(()=>{var p;class g{}return(p=g).\u0275fac=function(f){return new(f||p)},p.\u0275mod=o.oAB({type:p}),p.\u0275inj=o.cJS({imports:[C.vT,P.ez,b.U8,y.T,d.e4,e.g,h.cg]}),g})()}}]);