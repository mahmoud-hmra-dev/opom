"use strict";(self.webpackChunkworklenz=self.webpackChunkworklenz||[]).push([[693],{93693:(lt,b,i)=>{i.r(b),i.d(b,{JobTitlesModule:()=>et});var J=i(96814),_=i(52787),c=i(15861),m=i(60095),A=i(21406),z=i(69649),t=i(65879),Q=i(3278),O=i(90586),P=i(72042),I=i(64532),y=i(42840),U=i(70855),Y=i(41958),d=i(13740),v=i(10095),p=i(3599),g=i(20824),C=i(19035),S=i(62595),x=i(82962),T=i(92574),f=i(43389),Z=i(96109),M=i(24139),N=i(82669),F=i(39787);function L(e,r){if(1&e){const l=t.EpF();t.TgZ(0,"button",15),t.NdJ("click",function(){t.CHM(l);const o=t.oxw().$implicit,a=t.oxw();return t.KtG(a.edit(o.id))}),t._UZ(1,"span",16),t.qZA()}}function j(e,r){if(1&e){const l=t.EpF();t.TgZ(0,"button",17),t.NdJ("nzOnConfirm",function(){t.CHM(l);const o=t.oxw().$implicit,a=t.oxw();return t.KtG(a.delete(o.id))}),t._UZ(1,"span",18),t.qZA()}}function E(e,r){if(1&e){const l=t.EpF();t.TgZ(0,"tr",9)(1,"td",10),t.NdJ("click",function(){const a=t.CHM(l).$implicit,s=t.oxw();return t.KtG(s.edit(a.id))}),t._uU(2),t.qZA(),t.TgZ(3,"td",11)(4,"div",12)(5,"nz-space"),t.YNc(6,L,2,0,"button",13),t.YNc(7,j,2,0,"button",14),t.qZA()()()()}if(2&e){const l=r.$implicit;t.xp6(2),t.Oqu(l.name)}}function G(e,r){1&e&&t._UZ(0,"span",26)}function B(e,r){if(1&e){const l=t.EpF();t.TgZ(0,"form",22),t.NdJ("ngSubmit",function(){t.CHM(l);const o=t.oxw(2);return t.KtG(o.searchJobTitles())}),t.TgZ(1,"nz-input-group",23),t._UZ(2,"input",24),t.qZA(),t.YNc(3,G,1,0,"ng-template",null,25,t.W1O),t.qZA()}if(2&e){const l=t.MAs(4),n=t.oxw(2);t.Q6J("formGroup",n.searchForm)("nzLayout","vertical"),t.xp6(1),t.Q6J("nzSuffix",l),t.xp6(1),t.Q6J("formControlName","search")}}function K(e,r){if(1&e){const l=t.EpF();t.TgZ(0,"button",27),t.NdJ("click",function(){t.CHM(l);const o=t.oxw(2);return t.KtG(o.showJobTitlesModal=!0)}),t._uU(1),t.qZA()}if(2&e){const l=t.oxw(2);t.xp6(1),t.hij(" ",l.action," Job Title ")}}function D(e,r){if(1&e&&t._UZ(0,"worklenz-toggle-menu-button",28),2&e){const l=t.oxw(2);t.Q6J("key",l.menu.JOB_TITLES_MENU)}}function H(e,r){1&e&&(t.TgZ(0,"nz-space"),t.YNc(1,B,5,4,"form",19),t.YNc(2,K,2,1,"button",20),t.YNc(3,D,1,1,"worklenz-toggle-menu-button",21),t.qZA())}function V(e,r){if(1&e){const l=t.EpF();t.ynx(0),t.TgZ(1,"nz-spin",29)(2,"form",30),t.NdJ("submit",function(){t.CHM(l);const o=t.oxw();return t.KtG(o.handleOk())}),t.TgZ(3,"nz-form-item")(4,"nz-form-label",31),t._uU(5,"Name"),t.qZA(),t.TgZ(6,"nz-form-control",32),t._UZ(7,"input",33),t.qZA()(),t.TgZ(8,"button",34),t._uU(9),t.qZA()()(),t.BQk()}if(2&e){const l=t.oxw();t.xp6(1),t.Q6J("nzSpinning",l.loadingSingle),t.xp6(1),t.Q6J("formGroup",l.form)("nzLayout","vertical"),t.xp6(2),t.Q6J("nzSpan",null),t.xp6(2),t.Q6J("nzSpan",null),t.xp6(1),t.Q6J("formControlName","name"),t.xp6(2),t.Oqu(l.action)}}const w=function(){return{rows:5}},$=function(){return[]},R=[{path:"",component:(()=>{var e;class r{constructor(n,o,a,s,h){this.api=n,this.fb=o,this.app=a,this.menu=s,this.utilsService=h,this.showJobTitlesModal=!1,this.model={},this.jobTitle={},this.loading=!1,this.loadingSingle=!1,this.action="Create",this.total=0,this.pageSize=A.L8,this.pageIndex=1,this.paginationSizes=[5,10,15,20,50,100],this.sortField=null,this.sortOrder=null,this.app.setTitle("Manage Job Titles"),this.form=this.fb.group({name:[null,[m.kI.required]]}),this.searchForm=this.fb.group({search:[""]}),this.searchForm.valueChanges.subscribe(()=>{this.searchJobTitles().then(u=>u)})}onQueryParamsChange(n){var o=this;return(0,c.Z)(function*(){const{pageSize:a,pageIndex:s,sort:h}=n;o.pageIndex=s,o.pageSize=a;const u=h.find(it=>null!==it.value);o.sortField=u&&u.key||null,o.sortOrder=u&&u.value||null,yield o.getJobTitles()})()}addJobTitle(){var n=this;return(0,c.Z)(function*(){try{const o={name:n.form.controls.name.value};(yield n.api.create(o)).done&&(n.closeModal(),yield n.getJobTitles())}catch(o){(0,z.tu)(o)}})()}getJobTitles(){var n=this;return(0,c.Z)(function*(){try{n.loading=!0;const o=yield n.api.get(n.pageIndex,n.pageSize,n.sortField,n.sortOrder,n.searchForm.value.search);o.done&&(n.model=o.body,n.total=n.model.total||0,n.utilsService.handleLastIndex(n.total,n.model.data?.length||0,n.pageIndex,a=>{n.pageIndex=a,n.getJobTitles()})),n.loading=!1}catch(o){(0,z.tu)(o),n.loading=!1}})()}getJobTitle(n){var o=this;return(0,c.Z)(function*(){try{o.loadingSingle=!0;const a=yield o.api.getById(n);a.done&&(o.jobTitle=a.body,o.form.controls.name.setValue(o.jobTitle.name)),o.loadingSingle=!1}catch(a){(0,z.tu)(a),o.loadingSingle=!1}})()}updateJobTitle(){var n=this;return(0,c.Z)(function*(){if(n.jobTitle&&n.jobTitle.id)try{n.loadingSingle=!0;const o={name:n.form.controls.name.value},a=yield n.api.update(n.jobTitle.id,o);n.loadingSingle=!1,a.done&&(n.closeModal(),yield n.getJobTitles())}catch(o){n.loadingSingle=!1,(0,z.tu)(o)}})()}delete(n){var o=this;return(0,c.Z)(function*(){if(n)try{(yield o.api.delete(n)).done&&(yield o.getJobTitles())}catch(a){(0,z.tu)(a)}})()}edit(n){var o=this;return(0,c.Z)(function*(){n&&(yield o.getJobTitle(n),o.action="Update",o.showJobTitlesModal=!0)})()}closeModal(){this.showJobTitlesModal=!1,this.form.reset(),this.jobTitle={},this.action="Create"}handleOk(){var n=this;return(0,c.Z)(function*(){n.jobTitle&&n.jobTitle.id?yield n.updateJobTitle():yield n.addJobTitle()})()}searchJobTitles(){var n=this;return(0,c.Z)(function*(){n.getJobTitles().then(o=>o)})()}}return(e=r).\u0275fac=function(n){return new(n||e)(t.Y36(Q.i),t.Y36(m.qu),t.Y36(O.z),t.Y36(P.h),t.Y36(I.F))},e.\u0275cmp=t.Xpm({type:e,selectors:[["worklenz-job-titles"]],decls:14,vars:18,consts:[[3,"nzExtra"],[3,"nzActive","nzLoading","nzParagraph"],["nzShowSizeChanger","","nzSize","small",1,"custom-table",3,"nzData","nzFrontPagination","nzLoading","nzPageIndex","nzPageSizeOptions","nzPageSize","nzTotal","nzQueryParams"],["table",""],["colspan","2","nzAlign","left","nzColumnKey","name","scope","col",3,"nzSortFn"],["class","actions-row",4,"ngFor","ngForOf"],["searchTemplate",""],["nzPlacement","right",3,"nzVisible","nzClosable","nzTitle","nzOnClose","nzVisibleChange"],[4,"nzDrawerContent"],[1,"actions-row"],[1,"cursor-pointer",3,"click"],[1,"actions-col"],[1,"actions"],["nz-button","","nz-tooltip","","nzSize","small","nzTooltipPlacement","top","nzTooltipTitle","Edit","nzType","default",3,"click",4,"nzSpaceItem"],["nz-button","","nz-popconfirm","","nz-tooltip","","nzOkText","Yes","nzPopconfirmTitle","Are you sure?","nzSize","small","nzTooltipPlacement","top","nzTooltipTitle","Delete","nzType","default",3,"nzOnConfirm",4,"nzSpaceItem"],["nz-button","","nz-tooltip","","nzSize","small","nzTooltipPlacement","top","nzTooltipTitle","Edit","nzType","default",3,"click"],["nz-icon","","nzType","edit"],["nz-button","","nz-popconfirm","","nz-tooltip","","nzOkText","Yes","nzPopconfirmTitle","Are you sure?","nzSize","small","nzTooltipPlacement","top","nzTooltipTitle","Delete","nzType","default",3,"nzOnConfirm"],["nz-icon","","nzType","delete"],["nz-form","",3,"formGroup","nzLayout","ngSubmit",4,"nzSpaceItem"],["nz-button","","nzType","primary",3,"click",4,"nzSpaceItem"],[3,"key",4,"nzSpaceItem"],["nz-form","",3,"formGroup","nzLayout","ngSubmit"],[3,"nzSuffix"],["nz-input","","placeholder","Search by name","type","text",3,"formControlName"],["suffixIconSearch",""],["nz-icon","","nzType","search"],["nz-button","","nzType","primary",3,"click"],[3,"key"],[3,"nzSpinning"],["nz-form","",3,"formGroup","nzLayout","submit"],["nzRequired","",3,"nzSpan"],["nzErrorTip","Please enter a name!",3,"nzSpan"],["nz-input","","placeholder","Name",3,"formControlName"],["nz-button","","nzBlock","","nzType","primary","type","submit"]],template:function(n,o){if(1&n&&(t.TgZ(0,"nz-card",0)(1,"nz-skeleton",1)(2,"nz-table",2,3),t.NdJ("nzQueryParams",function(s){return o.onQueryParamsChange(s)}),t.TgZ(4,"thead")(5,"tr")(6,"th",4),t._uU(7,"Name"),t.qZA()()(),t.TgZ(8,"tbody"),t.YNc(9,E,8,1,"tr",5),t.qZA()()(),t.YNc(10,H,4,0,"ng-template",null,6,t.W1O),t.qZA(),t.TgZ(12,"nz-drawer",7),t.NdJ("nzOnClose",function(){return o.closeModal()})("nzVisibleChange",function(s){return o.showJobTitlesModal=s}),t.YNc(13,V,10,7,"ng-container",8),t.qZA()),2&n){const a=t.MAs(3),s=t.MAs(11);t.Q6J("nzExtra",s),t.xp6(1),t.Q6J("nzActive",!0)("nzLoading",o.loading)("nzParagraph",t.DdM(16,w)),t.xp6(1),t.Q6J("nzData",o.model.data||t.DdM(17,$))("nzFrontPagination",!1)("nzLoading",o.loading)("nzPageIndex",o.pageIndex)("nzPageSizeOptions",o.paginationSizes)("nzPageSize",o.pageSize)("nzTotal",o.total),t.xp6(4),t.Q6J("nzSortFn",!0),t.xp6(3),t.Q6J("ngForOf",a.data),t.xp6(3),t.MGl("nzTitle","",o.action," Title"),t.Q6J("nzVisible",o.showJobTitlesModal)("nzClosable",!0)}},dependencies:[J.sg,y.ix,U.w,Y.dQ,d.N8,d.qD,d.Uo,d._C,d.Om,d.p0,d.$Z,d.UX,v.t3,v.SK,p.Lr,p.Nx,p.iK,p.Fd,m._Y,m.Fj,m.JJ,m.JL,m.sg,m.u,g.Zp,g.gB,g.ke,C.JW,S.Ls,x.bd,T.NU,T.$1,f.Vz,f.SQ,Z.SY,M.ng,N.W,F.l]}),r})()}];let W=(()=>{var e;class r{}return(e=r).\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[_.Bz.forChild(R),_.Bz]}),r})();var X=i(26254),k=i(66987),q=i(81221),tt=i(3626),nt=i(33410),ot=i(8083);let et=(()=>{var e;class r{}return(e=r).\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[J.ez,W,X.KJ,y.sL,d.HQ,k.S,q.Qp,p.U5,m.UX,g.o7,C._p,tt.lt,S.PV,x.vh,T.zf,nt.wm,ot.ZJ,f.BL,Z.cg,M.H0,N.j,F.l]}),r})()}}]);