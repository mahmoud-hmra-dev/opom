"use strict";(self.webpackChunkworklenz=self.webpackChunkworklenz||[]).push([[570],{99865:(N,F,r)=>{r.d(F,{n:()=>L});var h=r(15861),e=r(65879),o=r(96814),x=r(42840),A=r(3599),g=r(10095),f=r(62595),D=r(9691),v=r(41958),l=r(76271),d=r(60095),T=r(69649),P=r(20824),j=r(53980),O=r(70855);const S=["nameInput"];function I(b,w){if(1&b){const y=e.EpF();e.ynx(0),e.TgZ(1,"input",3,4),e.NdJ("ngModelChange",function(m){e.CHM(y);const p=e.oxw();return e.KtG(p.newCategoryName=m)})("blur",function(){e.CHM(y);const m=e.oxw();return e.KtG(m.resetInputMode())})("keyup.enter",function(m){e.CHM(y);const p=e.oxw();return m.stopPropagation(),e.KtG(p.create())}),e.qZA(),e.BQk()}if(2&b){const y=e.oxw();e.xp6(1),e.Q6J("ngModel",y.newCategoryName)("disabled",y.creating)}}function Q(b,w){if(1&b&&(e.TgZ(0,"nz-option",10),e.ALo(1,"safeString"),e._uU(2),e.qZA()),2&b){const y=w.$implicit;e.Q6J("nzLabel",e.lcZ(1,3,y.name))("nzValue",y.id),e.xp6(2),e.hij(" ",y.name," ")}}function k(b,w){if(1&b){const y=e.EpF();e.ynx(0),e.TgZ(1,"nz-select",5),e.NdJ("ngModelChange",function(m){e.CHM(y);const p=e.oxw();return e.KtG(p.categoryId=m)})("ngModelChange",function(m){e.CHM(y);const p=e.oxw();return e.KtG(p.onCategoryChange(m))}),e.YNc(2,Q,3,5,"nz-option",6),e.TgZ(3,"nz-option",7)(4,"button",8),e.NdJ("click",function(){e.CHM(y);const m=e.oxw();return e.KtG(m.newCategory())}),e._UZ(5,"span",9),e._uU(6," New Category "),e.qZA()()(),e.BQk()}if(2&b){const y=e.oxw();e.xp6(1),e.Q6J("ngModel",y.categoryId)("nzLoading",y.loading)("nzPlaceHolder","Add a category to the project")("nzDisabled",y.disabled)("nzAllowClear",!0),e.xp6(1),e.Q6J("ngForOf",y.categories),e.xp6(1),e.Q6J("nzValue","add"),e.xp6(1),e.Q6J("nzType","dashed")("nzSize","small"),e.xp6(1),e.Q6J("nzType","plus")("nzTheme","outline")}}let L=(()=>{var b;class w{constructor(_,m,p){this.cdr=_,this.api=m,this.ngZone=p,this.categoryId=null,this.categoryIdChange=new e.vpe,this.disabled=!1,this.loading=!1,this.creating=!1,this.showCategoryInput=!1,this.categories=[],this.newCategoryName=null}ngOnInit(){this.get()}get(){var _=this;return(0,h.Z)(function*(){try{_.loading=!0;const m=yield _.api.get();m.done&&(_.categories=m.body),_.loading=!1}catch(m){_.loading=!1,(0,T.tu)(m)}_.cdr.markForCheck()})()}newCategory(){this.showCategoryInput||(this.newCategoryName=null,this.showCategoryInput=!0,this.focusInput(),this.cdr.markForCheck())}onCategoryChange(_){this.categoryId=_,this.categoryIdChange.emit(this.categoryId)}resetInputMode(){this.showCategoryInput=!1,this.newCategoryName=null}create(){var _=this;return(0,h.Z)(function*(){if(_.newCategoryName?.trim()&&!_.creating){try{_.creating=!0;const m={name:_.newCategoryName},p=yield _.api.create(m);p.done&&(yield _.get(),_.handleCreate(p.body)),_.creating=!1}catch{_.creating=!1}_.cdr.markForCheck()}})()}handleCreate(_){this.onCategoryChange(_.id),this.resetInputMode()}focusInput(){this.ngZone.runOutsideAngular(()=>{setTimeout(()=>{this.nameInput.nativeElement?.focus()})})}}return(b=w).\u0275fac=function(_){return new(_||b)(e.Y36(e.sBO),e.Y36(j.s),e.Y36(e.R0b))},b.\u0275cmp=e.Xpm({type:b,selectors:[["worklenz-project-categories-autocomplete"]],viewQuery:function(_,m){if(1&_&&e.Gf(S,5),2&_){let p;e.iGM(p=e.CRH())&&(m.nameInput=p.first)}},inputs:{categoryId:"categoryId",disabled:"disabled"},outputs:{categoryIdChange:"categoryIdChange"},standalone:!0,features:[e.jDz],decls:6,vars:6,consts:[[3,"nzSpan"],[3,"ngSwitch","nzSpan","nzExtra"],[4,"ngSwitchCase"],["nz-input","","placeholder","Enter a name for the category",3,"ngModel","disabled","ngModelChange","blur","keyup.enter"],["nameInput",""],[3,"ngModel","nzLoading","nzPlaceHolder","nzDisabled","nzAllowClear","ngModelChange"],["nzCustomContent","",3,"nzLabel","nzValue",4,"ngFor","ngForOf"],["nzCustomContent","",3,"nzValue"],["nz-button","","nzBlock","",3,"nzType","nzSize","click"],["nz-icon","",3,"nzType","nzTheme"],["nzCustomContent","",3,"nzLabel","nzValue"]],template:function(_,m){1&_&&(e.TgZ(0,"nz-form-item")(1,"nz-form-label",0),e._uU(2,"Category"),e.qZA(),e.TgZ(3,"nz-form-control",1),e.YNc(4,I,3,2,"ng-container",2),e.YNc(5,k,7,11,"ng-container",2),e.qZA()()),2&_&&(e.xp6(1),e.Q6J("nzSpan",null),e.xp6(2),e.Q6J("ngSwitch",m.showCategoryInput)("nzSpan",null)("nzExtra",m.showCategoryInput?"Hit enter to create!":""),e.xp6(1),e.Q6J("ngSwitchCase",!0),e.xp6(1),e.Q6J("ngSwitchCase",!1))},dependencies:[o.ez,o.sg,o.RF,o.n9,x.sL,x.ix,O.w,v.dQ,A.U5,g.t3,g.SK,A.Nx,A.iK,A.Fd,g.Jb,f.PV,f.Ls,D.LV,D.Ip,D.Vq,v.vG,l.m,d.UX,d.Fj,d.JJ,d.u5,d.On,P.o7,P.Zp],changeDetection:0}),w})()},13490:(N,F,r)=>{r.d(F,{g:()=>Se});var h=r(15861),e=r(65879),o=r(60095),x=r(21406),A=r(59556),g=r(69649),f=r(9691),D=r(43389),v=r(55695),l=r(82669),d=r(3599),T=r(95717),P=r(62595),j=r(96814),O=r(20824),S=r(99783),I=r(10095);function Q(s,z){1&s&&(e.TgZ(0,"nz-auto-option"),e._UZ(1,"span",6),e._uU(2," Loading Data... "),e.qZA())}function k(s,z){if(1&s&&(e.TgZ(0,"nz-auto-option",9),e._uU(1),e.qZA()),2&s){const a=e.oxw(2);e.s9C("nzValue",a.newName),e.xp6(1),e.hij('+ ADD "',a.newName,'"')}}function L(s,z){if(1&s&&(e.TgZ(0,"nz-auto-option",9),e._uU(1),e.qZA()),2&s){const a=z.$implicit;e.Q6J("nzValue",a.name),e.xp6(1),e.Oqu(a.name)}}function b(s,z){if(1&s&&(e.TgZ(0,"span"),e.YNc(1,k,2,2,"nz-auto-option",7),e.YNc(2,L,2,2,"nz-auto-option",8),e.qZA()),2&s){const a=e.oxw();e.xp6(1),e.Q6J("ngIf",a.isNew),e.xp6(1),e.Q6J("ngForOf",a.clients)}}let w=(()=>{var s;class z{constructor(t,n){this.api=t,this.fb=n,this.nameChange=new e.vpe,this.name=null,this.searching=!1,this.isNew=!1,this.newName=null,this.clients=[],this.total=0,this.form=this.fb.group({name:[]})}ngOnInit(){var t=this;return(0,h.Z)(function*(){t.form.controls.name.setValue(t.name||null),t.form.get("name")?.valueChanges.subscribe(n=>{if(n)return t.newName=n,void(t.isNew=!t.clients.some(i=>i.name===n));t.isNew=!1}),yield t.get()})()}get(){var t=this;return(0,h.Z)(function*(){try{const n=yield t.api.get(1,5,null,null,t.form.value.name||null);n.done&&(t.clients=n.body.data||[],t.total=t.clients.length)}catch(n){(0,g.tu)(n)}})()}search(){var t=this;return(0,h.Z)(function*(){t.emitChange(),t.searching=!0,yield t.get(),t.searching=!1})()}emitChange(){this.form.valid&&this.nameChange.emit(this.form.value.name.trim())}}return(s=z).\u0275fac=function(t){return new(t||s)(e.Y36(S.Q),e.Y36(o.qu))},s.\u0275cmp=e.Xpm({type:s,selectors:[["worklenz-clients-autocomplete"]],inputs:{name:"name"},outputs:{nameChange:"nameChange"},standalone:!0,features:[e.jDz],decls:10,vars:9,consts:[["nz-form","",3,"formGroup","nzLayout"],[3,"nzSpan","nzTooltipTitle"],[3,"nzSpan"],["nz-input","","placeholder","Select client",3,"formControlName","nzAutocomplete","ngModelChange"],["jobTitlesAutoComplete",""],[4,"ngIf"],["nz-icon","","nzType","loading",1,"loading-icon"],[3,"nzValue",4,"ngIf"],[3,"nzValue",4,"ngFor","ngForOf"],[3,"nzValue"]],template:function(t,n){if(1&t&&(e.TgZ(0,"form",0)(1,"nz-form-item")(2,"nz-form-label",1),e._uU(3,"Client"),e.qZA(),e.TgZ(4,"nz-form-control",2)(5,"input",3),e.NdJ("ngModelChange",function(){return n.search()}),e.qZA(),e.TgZ(6,"nz-autocomplete",null,4),e.YNc(8,Q,3,0,"nz-auto-option",5),e.YNc(9,b,3,2,"span",5),e.qZA()()()()),2&t){const i=e.MAs(7);e.Q6J("formGroup",n.form)("nzLayout","vertical"),e.xp6(2),e.Q6J("nzSpan",null)("nzTooltipTitle","You can manage clients under settings."),e.xp6(2),e.Q6J("nzSpan",null),e.xp6(1),e.Q6J("formControlName","name")("nzAutocomplete",i),e.xp6(3),e.Q6J("ngIf",n.searching),e.xp6(1),e.Q6J("ngIf",!n.searching)}},dependencies:[o.UX,o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u,d.U5,I.t3,I.SK,d.Lr,d.Nx,d.iK,d.Fd,T.ic,T.gi,T.NB,T.Pf,P.PV,P.Ls,j.O5,j.sg,O.o7,O.Zp]}),z})();var y=r(42840),_=r(19035),m=r(72095),p=r(52682),Z=r(62787),c=r(76271),u=r(34302),C=r(96109),E=r(8083),J=r(66987),R=r(93903),W=r(99865),B=r(33640),G=r(16676),V=r.n(G),H=r(68373),X=r(2919),$=r(96928),q=r(62612),ee=r(9172),te=r(31215),ne=r(45538),oe=r(90586),re=r(52732),ae=r(9435),ie=r(55012),se=r(97192),le=r(64532),ce=r(45019),me=r(19350),ue=r(18223),_e=r(70855),de=r(41958),Y=r(73460);const pe=["projectName"],he=["memberSearchInput"],ge=["projectManagerSelector"],fe=["outsideClicker"];function ze(s,z){1&s&&e._UZ(0,"nz-alert",38),2&s&&e.Q6J("nzType","warning")("nzMessage","Members do not have permissions to change settings.")}function Ce(s,z){if(1&s){const a=e.EpF();e.TgZ(0,"nz-form-item")(1,"nz-form-label",6),e._uU(2,"Key"),e.qZA(),e.TgZ(3,"nz-form-control",16)(4,"input",39),e.NdJ("keyup",function(){e.CHM(a);const n=e.oxw(2);return e.KtG(n.onKeyChange())}),e.qZA()()()}2&s&&(e.xp6(1),e.Q6J("nzSpan",null),e.xp6(2),e.Q6J("nzSpan",null),e.xp6(1),e.Q6J("formControlName","key")("maxlength",5))}function ve(s,z){if(1&s){const a=e.EpF();e.TgZ(0,"li",40),e.NdJ("click",function(){const i=e.CHM(a).$implicit,M=e.oxw(2);return e.KtG(M.setColorCode(i))}),e.TgZ(1,"nz-tag",41),e._uU(2,"\xa0 "),e.qZA()()}if(2&s){const a=z.$implicit;e.xp6(1),e.Q6J("nzColor",a)}}function ye(s,z){if(1&s&&(e.TgZ(0,"nz-option",42),e.ALo(1,"safeString"),e._UZ(2,"span",43),e.ALo(3,"safeString"),e._uU(4),e.qZA()),2&s){const a=z.$implicit;e.Q6J("nzLabel",e.lcZ(1,6,a.name))("nzValue",a.id),e.xp6(2),e.Udp("color",a.color_code),e.Q6J("nzType",e.lcZ(3,8,a.icon)),e.xp6(2),e.hij(" ",a.name," ")}}function Te(s,z){if(1&s&&(e.TgZ(0,"nz-option",42),e.ALo(1,"safeString"),e._UZ(2,"nz-badge",44),e.qZA()),2&s){const a=z.$implicit;e.Q6J("nzLabel",e.lcZ(1,4,a.name))("nzValue",a.id),e.xp6(2),e.Q6J("nzColor",a.color_code+"69")("nzText",a.name)}}function Me(s,z){if(1&s){const a=e.EpF();e.TgZ(0,"worklenz-clients-autocomplete",45),e.NdJ("nameChange",function(n){e.CHM(a);const i=e.oxw(2);return e.KtG(i.onNameChangeSubmit(n))}),e.qZA()}if(2&s){const a=e.oxw(2);e.Q6J("name",a.clientName)}}function xe(s,z){if(1&s){const a=e.EpF();e.ynx(0),e._UZ(1,"nz-avatar",46),e.ALo(2,"firstCharUpper"),e.TgZ(3,"span",47),e._uU(4),e.qZA(),e.TgZ(5,"span",48),e.NdJ("click",function(){e.CHM(a);const n=e.oxw(2);return e.KtG(n.handleMemberChange(null))}),e._UZ(6,"span",49),e.qZA(),e.BQk()}if(2&s){const a=e.oxw(2);e.xp6(1),e.Udp("background-color",a.projectManager.avatar_url?"#ececec":a.projectManager.color_code),e.Q6J("nzSize",24)("nzSrc",a.projectManager.avatar_url)("nzText",e.lcZ(2,8,a.projectManager.name))("nzTooltipPlacement","top")("nzTooltipTitle",a.projectManager.name),e.xp6(3),e.Oqu(a.projectManager.name)}}function Pe(s,z){1&s&&(e.TgZ(0,"span",50),e._UZ(1,"nz-avatar",51),e.qZA()),2&s&&(e.xp6(1),e.Q6J("nzSize",26)("nzIcon","plus"))}function Ae(s,z){1&s&&(e.TgZ(0,"small",63),e._uU(1,"(Pending Invitation)"),e.qZA())}function je(s,z){if(1&s){const a=e.EpF();e.TgZ(0,"li",57),e.NdJ("click",function(){const i=e.CHM(a).$implicit,M=e.oxw(3);return e.KtG(M.handleMemberChange(i))}),e.TgZ(1,"div",58),e._UZ(2,"nz-avatar",59),e.ALo(3,"firstCharUpper"),e.TgZ(4,"div",60)(5,"span",61),e._uU(6),e.qZA(),e.TgZ(7,"small",50),e._uU(8),e.YNc(9,Ae,2,0,"small",62),e.qZA()()()()}if(2&s){const a=z.$implicit;e.Q6J("nzDisabled",a.pending_invitation),e.xp6(2),e.Udp("background-color",a.avatar_url?"#ececec":a.color_code),e.Q6J("nzSize",24)("nzSrc",a.avatar_url)("nzText",e.lcZ(3,11,a.name))("nzTooltipPlacement","top")("nzTooltipTitle",a.name),e.xp6(4),e.Oqu(a.name),e.xp6(2),e.hij(" ",a.email," "),e.xp6(1),e.Q6J("ngIf",a.pending_invitation)}}function Oe(s,z){if(1&s){const a=e.EpF();e.TgZ(0,"ul",52)(1,"li",53)(2,"input",54,55),e.NdJ("input",function(){e.CHM(a);const n=e.oxw(2);return e.KtG(n.getTeamMembers())}),e.qZA()(),e.YNc(4,je,10,13,"li",56),e.ALo(5,"searchByName"),e.qZA()}if(2&s){const a=e.oxw(2);e.xp6(4),e.Q6J("ngForOf",e.xi3(5,2,a.teamMembers,a.searchingName))("ngForTrackBy",a.trackById)}}function Ze(s,z){if(1&s){const a=e.EpF();e.TgZ(0,"button",66),e.NdJ("nzOnConfirm",function(){e.CHM(a);const n=e.oxw(3);return e.KtG(n.delete())}),e._uU(1," Delete Project "),e.qZA()}if(2&s){const a=e.oxw(3);e.Q6J("nzLoading",a.deletingProject)("nzOkText","ok")("nzPopconfirmTitle","Are you sure?")("nzType","dashed")}}function Ee(s,z){if(1&s){const a=e.EpF();e.ynx(0),e.TgZ(1,"button",64),e.NdJ("click",function(){e.CHM(a);const n=e.oxw(2);return e.KtG(n.submit())}),e._uU(2),e.qZA(),e.YNc(3,Ze,2,4,"button",65),e.BQk()}if(2&s){const a=e.oxw(2);e.xp6(1),e.Q6J("nzLoading",a.updatingProject)("nzType","primary"),e.xp6(1),e.Oqu(a.submitButtonText),e.xp6(1),e.Q6J("ngIf",a.projectId)}}function De(s,z){if(1&s&&(e.TgZ(0,"div",70)(1,"small",71),e.ALo(2,"date"),e._uU(3),e.ALo(4,"fromNow"),e.qZA()()),2&s){const a=e.oxw(3);e.xp6(1),e.Q6J("nzTooltipPlacement","right")("nzTooltipTitle",e.xi3(2,4,a.model.created_at,"medium")),e.xp6(2),e.AsE(" Created ",e.lcZ(4,7,a.model.created_at)," by ",a.model.project_owner," ")}}function be(s,z){if(1&s&&(e.TgZ(0,"div",70)(1,"small",71),e.ALo(2,"date"),e._uU(3),e.ALo(4,"fromNow"),e.qZA()()),2&s){const a=e.oxw(3);e.xp6(1),e.Q6J("nzTooltipPlacement","right")("nzTooltipTitle",e.xi3(2,3,a.model.updated_at,"medium")),e.xp6(2),e.hij(" Updated ",e.lcZ(4,6,a.model.updated_at)," ")}}function Ie(s,z){if(1&s&&(e.ynx(0),e._UZ(1,"nz-divider",67),e.TgZ(2,"div",68),e.YNc(3,De,5,9,"div",69),e.YNc(4,be,5,8,"div",69),e.qZA(),e.BQk()),2&s){const a=e.oxw(2);e.xp6(3),e.Q6J("ngIf",a.model.created_at),e.xp6(1),e.Q6J("ngIf",a.model.updated_at)}}function Fe(s,z){if(1&s){const a=e.EpF();e.ynx(0),e.TgZ(1,"nz-spin",3),e.YNc(2,ze,1,2,"nz-alert",4),e.TgZ(3,"form",5)(4,"nz-form-item")(5,"nz-form-label",6),e._uU(6,"Name"),e.qZA(),e.TgZ(7,"nz-form-control",7),e._UZ(8,"input",8,9),e.qZA()(),e.YNc(10,Ce,5,4,"nz-form-item",10),e.TgZ(11,"nz-form-item")(12,"nz-form-label",11),e._uU(13,"Project color "),e.TgZ(14,"nz-tag",12),e._uU(15,"\xa0 "),e.qZA()(),e.TgZ(16,"nz-dropdown-menu",null,13)(18,"ul",14),e.YNc(19,ve,3,1,"li",15),e.qZA()()(),e.TgZ(20,"nz-form-item")(21,"nz-form-label",16),e._uU(22,"Status"),e.qZA(),e.TgZ(23,"nz-form-control",16)(24,"nz-select",17),e.YNc(25,ye,5,10,"nz-option",18),e.qZA()()(),e.TgZ(26,"nz-form-item")(27,"nz-form-label",16),e._uU(28,"Health"),e.qZA(),e.TgZ(29,"nz-form-control",16)(30,"nz-select",17),e.YNc(31,Te,3,6,"nz-option",18),e.qZA()()(),e.TgZ(32,"worklenz-project-categories-autocomplete",19),e.NdJ("categoryIdChange",function(n){e.CHM(a);const i=e.oxw();return e.KtG(i.categoryId=n)}),e.qZA(),e.TgZ(33,"nz-form-item")(34,"nz-form-label",16),e._uU(35,"Notes"),e.qZA(),e.TgZ(36,"nz-form-control",16),e._UZ(37,"textarea",20),e.qZA()(),e.YNc(38,Me,1,1,"worklenz-clients-autocomplete",21),e.TgZ(39,"nz-form-item")(40,"nz-form-label",16),e._uU(41," Project Manager "),e.TgZ(42,"div",22),e.NdJ("nzVisibleChange",function(n){e.CHM(a);const i=e.oxw();return e.KtG(i.handleOwnerVisibleChange(n))}),e.TgZ(43,"div",23,24),e.YNc(45,xe,7,10,"ng-container",10),e.YNc(46,Pe,2,2,"span",25),e.qZA(),e.TgZ(47,"nz-dropdown-menu",null,26),e.YNc(49,Oe,6,5,"ul",27),e.qZA()()()(),e._UZ(50,"div",null,28),e.TgZ(52,"nz-input-group",29)(53,"div",30)(54,"div",31)(55,"nz-form-item")(56,"nz-form-label",16),e._uU(57,"Start date"),e.qZA(),e.TgZ(58,"nz-form-control",16)(59,"nz-date-picker",32),e.NdJ("nzOnOpenChange",function(){e.CHM(a);const n=e.oxw();return e.KtG(n.calculateManDays())}),e.qZA()()()(),e.TgZ(60,"div",31)(61,"nz-form-item")(62,"nz-form-label",16),e._uU(63,"End date"),e.qZA(),e.TgZ(64,"nz-form-control",16)(65,"nz-date-picker",32),e.NdJ("nzOnOpenChange",function(){e.CHM(a);const n=e.oxw();return e.KtG(n.calculateManDays())}),e.qZA()()()(),e.TgZ(66,"div",31)(67,"nz-form-item")(68,"nz-form-label",33),e._uU(69,"Estimated working days"),e.qZA(),e.TgZ(70,"nz-form-control",34),e._UZ(71,"nz-input-number",35),e.qZA()()(),e.TgZ(72,"div",31)(73,"nz-form-item")(74,"nz-form-label",33),e._uU(75,"Estimated man days"),e.qZA(),e.TgZ(76,"nz-form-control",34),e._UZ(77,"nz-input-number",36),e.qZA()()(),e.TgZ(78,"div",31)(79,"nz-form-item")(80,"nz-form-label",33),e._uU(81,"Hours per day"),e.qZA(),e.TgZ(82,"nz-form-control",34),e._UZ(83,"nz-input-number",37),e.qZA()()()()(),e.YNc(84,Ee,4,4,"ng-container",10),e.qZA(),e.YNc(85,Ie,5,2,"ng-container",10),e.qZA(),e.BQk()}if(2&s){const a=e.MAs(17),t=e.MAs(48),n=e.oxw();e.xp6(1),e.Q6J("nzSpinning",n.isLoading()),e.xp6(1),e.Q6J("ngIf",n.isMember),e.xp6(1),e.Q6J("formGroup",n.form)("nzLayout","vertical"),e.xp6(2),e.Q6J("nzSpan",null),e.xp6(2),e.Q6J("nzSpan",null),e.xp6(1),e.Q6J("formControlName","name"),e.xp6(2),e.Q6J("ngIf",n.projectId),e.xp6(2),e.Q6J("nzSpan",null),e.xp6(2),e.Q6J("nzColor",n.activeColorCode)("nzDropdownMenu",a)("nzDisabled",n.isMember)("nzTrigger","click"),e.xp6(5),e.Q6J("ngForOf",n.COLOR_CODES),e.xp6(2),e.Q6J("nzSpan",null),e.xp6(2),e.Q6J("nzSpan",null),e.xp6(1),e.Q6J("formControlName","status_id")("nzLoading",n.loadingProjStatuses),e.xp6(1),e.Q6J("ngForOf",n.statuses),e.xp6(2),e.Q6J("nzSpan",null),e.xp6(2),e.Q6J("nzSpan",null),e.xp6(1),e.Q6J("formControlName","health_id")("nzLoading",n.loadingProjHealths),e.xp6(1),e.Q6J("ngForOf",n.healths),e.xp6(1),e.Q6J("categoryId",n.categoryId)("disabled",n.isMember),e.xp6(2),e.Q6J("nzSpan",null),e.xp6(2),e.Q6J("nzSpan",null),e.xp6(1),e.Q6J("formControlName","notes"),e.xp6(1),e.Q6J("ngIf",!(n.isMember||n.edit&&n.loading)),e.xp6(2),e.Q6J("nzSpan",null),e.xp6(2),e.Q6J("nzClickHide",!1)("nzDropdownMenu",t)("nzTrigger","click")("nzDisabled",n.isMember||!n.isOwnerOrAdmin()&&n.isProjectManager()),e.xp6(3),e.Q6J("ngIf",n.projectManager),e.xp6(1),e.Q6J("ngIf",!n.projectManager),e.xp6(3),e.Q6J("ngIf",n.teamMembers.length),e.xp6(3),e.Q6J("nzSize","default"),e.xp6(1),e.Q6J("nzGutter",8),e.xp6(1),e.Q6J("nzSpan",12),e.xp6(2),e.Q6J("nzSpan",null),e.xp6(2),e.Q6J("nzSpan",null),e.xp6(1),e.Q6J("formControlName","start_date")("nzDisabledDate",n.utils.checkForMaxDate(n.endDate)),e.xp6(1),e.Q6J("nzSpan",12),e.xp6(2),e.Q6J("nzSpan",null),e.xp6(2),e.Q6J("nzSpan",null),e.xp6(1),e.Q6J("formControlName","end_date")("nzDisabledDate",n.utils.checkForMinDate(n.startDate)),e.xp6(1),e.Q6J("nzSpan",24),e.xp6(2),e.Q6J("nzSpan",null),e.xp6(2),e.Q6J("nzSpan",null),e.xp6(1),e.Q6J("formControlName","working_days")("nzMin",0)("maxlength",5),e.xp6(1),e.Q6J("nzSpan",24),e.xp6(2),e.Q6J("nzSpan",null),e.xp6(2),e.Q6J("nzSpan",null),e.xp6(1),e.Q6J("formControlName","man_days")("nzMin",0)("maxlength",10),e.xp6(1),e.Q6J("nzSpan",24),e.xp6(2),e.Q6J("nzSpan",null),e.xp6(2),e.Q6J("nzSpan",null),e.xp6(1),e.Q6J("formControlName","hours_per_day")("nzMin",0)("nzMax",24)("maxlength",2),e.xp6(1),e.Q6J("ngIf",!n.isMember),e.xp6(1),e.Q6J("ngIf",n.projectId)}}let Se=(()=>{var s;class z{get categoryId(){return this.form.controls.category_id.value||null}set categoryId(t){this.form.controls.category_id.setValue(t)}get startDate(){return this.form.value.start_date||null}get endDate(){return this.form.value.end_date||null}get title(){return this.projectId?"Update Project":"Create Project"}get submitButtonText(){return this.projectId?"Save Changes":"Create"}get activeColorCode(){return this.form.controls.color_code.value}constructor(t,n,i,M,U,K,we,Je,Ue,Ne,Qe,ke,Le,Re){this.api=t,this.fb=n,this.membersApi=i,this.app=M,this.statusesApi=U,this.auth=K,this.ngZone=we,this.foldersApi=Je,this.folderFormService=Ue,this.cdr=Ne,this.utils=Qe,this.projectFormService=ke,this.healthsApi=Le,this.projectsService=Re,this.onCreate=new e.vpe,this.onUpdate=new e.vpe,this.onProjectManagerUpdate=new e.vpe,this.onDelete=new e.vpe,this.COLOR_CODES=x.lD,this.show=!1,this.edit=!1,this.loading=!1,this.searching=!1,this.showTeamMemberModal=!1,this.updatingProject=!1,this.deletingProject=!1,this.loadingTeamMembers=!1,this.loadingProjStatuses=!1,this.loadingProjHealths=!1,this.isMember=!1,this.isManager=!1,this.loadingFolders=!1,this.clientName=null,this.projectManager=null,this.projectId=null,this.teamMembers=[],this.projectMembers=[],this.removedMembersList=[],this.removedTasks=[],this.newTasks=[],this.statuses=[],this.folders=[],this.healths=[],this.searchingName=null,this.model={},this.createForm()}createForm(){this.form=this.fb.group({name:[null,[o.kI.required]],key:[null,[o.kI.max(5)]],notes:[null,[]],start_date:[],project_manager:[null,[]],end_date:[],status_id:[],health_id:[],folder_id:[],category_id:[],color_code:[x.lD[1],[o.kI.required]],working_days:[0,[o.kI.required]],man_days:[0,[o.kI.required]],hours_per_day:[8,[o.kI.required]],_select_team_member_input:[null,[]]}),this.isMember&&this.form.disable(),this.form.controls._select_team_member_input.valueChanges.subscribe(t=>{this.searchingName=t,this.searchMembers()})}reset(){this.clientName=null,this.projectId=null,this.projectManager=null,this.teamMembers=[],this.projectMembers=[],this.removedMembersList=[],this.removedTasks=[],this.newTasks=[],this.deletingProject=!1,this.updatingProject=!1}handleClose(){this.reset(),this.show=!1}isOwnerOrAdmin(){return this.auth.getCurrentSession()?.owner||this.auth.getCurrentSession()?.is_admin}isProjectManager(){return!!this.projectsService.projectOwnerTeamMemberId&&this.auth.getCurrentSession()?.team_member_id===this.projectsService.projectOwnerTeamMemberId}open(t,n=!1){var i=this;return(0,h.Z)(function*(){i.isMember=!i.isOwnerOrAdmin()&&!i.isProjectManager(),i.show=!0,i.edit=n,i.createForm(),i.getProjectStatuses(),i.getProjectHealths(),t&&(i.projectId=t,i.get(i.projectId)),i.getTeamMembers()})()}isLoading(){return this.loadingTeamMembers}getFolders(){var t=this;return(0,h.Z)(function*(){try{t.loadingFolders=!0;const n=yield t.foldersApi.get();n.done&&(t.folders=n.body),t.loadingFolders=!1}catch(n){t.loadingFolders=!1,(0,g.tu)(n)}t.cdr.markForCheck()})()}getTeamMembers(){var t=this;return(0,h.Z)(function*(){try{t.loadingTeamMembers=!0;const n=yield t.membersApi.get(1,5,null,null,t.memberSearchInput?t.memberSearchInput.nativeElement.value:null,!0);n.done&&(t.teamMembers=n.body.data||[],t.teamMembers=t.teamMembers.filter(i=>i.active),t.teamMembers.sort((i,M)=>Number(i.pending_invitation)-Number(M.pending_invitation))),t.loadingTeamMembers=!1}catch(n){t.loadingTeamMembers=!1,(0,g.tu)(n)}t.cdr.markForCheck()})()}getProjectStatuses(){var t=this;return(0,h.Z)(function*(){try{t.loadingProjStatuses=!0;const n=yield t.statusesApi.get();if(n.done){t.statuses=n.body;const i=t.statuses.find(M=>M.is_default);!t.projectId&&i&&i.id&&t.form.controls.status_id.setValue(i.id)}t.loadingProjStatuses=!1}catch(n){t.loadingProjStatuses=!1,(0,g.tu)(n)}t.cdr.markForCheck()})()}getProjectHealths(){var t=this;return(0,h.Z)(function*(){try{t.loadingProjHealths=!0;const n=yield t.healthsApi.get();if(n){t.healths=n.body;const i=t.healths.find(M=>M.is_default);!t.projectId&&i&&i.id&&t.form.controls.health_id.setValue(i.id)}t.loadingProjHealths=!1}catch(n){t.loadingProjHealths=!1,(0,g.tu)(n)}t.cdr.markForCheck()})()}delete(){var t=this;return(0,h.Z)(function*(){if(t.projectId){try{t.deletingProject=!0,(yield t.api.delete(t.projectId)).done&&(t.handleClose(),t.onDelete?.emit()),t.deletingProject=!1}catch(n){t.deletingProject=!1,(0,g.tu)(n)}t.cdr.markForCheck()}})()}create(){var t=this;return(0,h.Z)(function*(){try{t.updatingProject=!0;const n={name:t.form.controls.name.value,client_name:t.clientName,notes:t.form.controls.notes.value,project_manager:t.projectManager,color_code:t.form.controls.color_code.value,status_id:t.form.controls.status_id.value,health_id:t.form.controls.health_id.value,start_date:t.form.controls.start_date.value,end_date:t.form.controls.end_date.value,folder_id:t.form.controls.folder_id.value,category_id:t.form.controls.category_id.value,working_days:t.form.controls.working_days.value,man_days:t.form.controls.man_days.value,hours_per_day:t.form.controls.hours_per_day.value},i=yield t.api.create(n);i.done&&(t.handleClose(),t.onCreate.emit(i.body),(0,A.xt)()),t.updatingProject=!1}catch(n){t.updatingProject=!1,(0,g.tu)(n)}t.cdr.markForCheck()})()}update(t){var n=this;return(0,h.Z)(function*(){try{n.updatingProject=!0;const i={name:n.form.controls.name.value,client_name:n.clientName,notes:n.form.controls.notes.value,project_manager:n.projectManager,key:n.form.controls.key.value,color_code:n.form.controls.color_code.value,status_id:n.form.controls.status_id.value,health_id:n.form.controls.health_id.value,start_date:n.form.controls.start_date.value,end_date:n.form.controls.end_date.value,folder_id:n.form.controls.folder_id.value,category_id:n.form.controls.category_id.value,working_days:n.form.controls.working_days.value,man_days:n.form.controls.man_days.value,hours_per_day:n.form.controls.hours_per_day.value},M=yield n.api.update(t,i);if(M.done)return n.handleClose(),n.onUpdate.emit(M.body),(0,A.xt)(),n.projectFormService.emitProjectUpdate(),!0;n.updatingProject=!1}catch(i){n.updatingProject=!1,(0,g.tu)(i)}return n.cdr.markForCheck(),!1})()}get(t){var n=this;return(0,h.Z)(function*(){if(t){try{n.loading=!0;const i=yield n.api.getById(t);i.done&&(n.model=i.body,n.form.patchValue(n.model),n.clientName=i.body.client_name,n.projectManager=n.model.project_manager?n.model.project_manager:null,n.projectMembers=n.model.members??[],n.newTasks=n.model.tasks??[],n.categoryId=n.model.category_id||null),n.loading=!1}catch(i){n.loading=!1,(0,g.tu)(i)}n.cdr.markForCheck()}})()}submit(){var t=this;return(0,h.Z)(function*(){t.isMember||(t.form.valid?t.projectId?yield t.update(t.projectId):t.create():t.app.displayErrorsOf(t.form))})()}searchMembers(){var t=this;return(0,h.Z)(function*(){t.searching=!0,yield t.getTeamMembers(),t.searching=!1,t.cdr.markForCheck()})()}onVisibilityChange(t){if(t){if(this.getFolders(),this.isMember)return;this.ngZone.runOutsideAngular(()=>{setTimeout(()=>{const n=this.projectName.nativeElement;n&&n.focus()},100)})}}handleOwnerVisibleChange(t){if(t)try{setTimeout(()=>{this.projectManagerSelector.nativeElement.classList.add("highlight")},100),this.cdr.markForCheck()}catch(n){(0,g.tu)(n),this.cdr.markForCheck()}else this.projectManagerSelector.nativeElement.classList.remove("highlight"),this.cdr.markForCheck()}setColorCode(t){this.form.controls.color_code.setValue(t)}onNameChangeSubmit(t){this.clientName=t||null}onKeyChange(){const t=this.form.controls.key.value;t&&this.form.controls.key.setValue(t.toUpperCase())}newFolder(){this.folderFormService.create(t=>{t&&(this.updateFolders(t),this.form.controls.folder_id?.setValue(t.id),this.cdr.markForCheck())})}updateFolders(t){const n=[...this.folders];n.push(t),n.sort((i,M)=>i.name.localeCompare(M.name)),this.folders=n}calculateManDays(){const t=this.form.controls.start_date.value,n=this.form.controls.end_date.value;if(t&&n){const i=V()(t),M=V()(n);let U=M.diff(i,"days")+1;M.isoWeekday()>5&&(U-=M.isoWeekday()%5),i.isoWeekday()>5&&(U-=3-i.isoWeekday()%5),U>5&&(U-=(U-U%7)/7*2),this.form.controls.working_days.setValue(U)}}trackById(t,n){return n.id}handleMemberChange(t){t?.pending_invitation||this.isMember||!this.isOwnerOrAdmin()&&this.isProjectManager()||(this.projectManager=t,this.focusOut(),this.cdr.markForCheck())}focusOut(){setTimeout(()=>{this.outsideClicker.nativeElement.click()},50),this.cdr.markForCheck()}}return(s=z).\u0275fac=function(t){return new(t||s)(e.Y36(te.U),e.Y36(o.qu),e.Y36(ne.B),e.Y36(oe.z),e.Y36(re.k),e.Y36(ae.e),e.Y36(e.R0b),e.Y36(ie.Y),e.Y36(se.I),e.Y36(e.sBO),e.Y36(le.F),e.Y36(ce.s),e.Y36(me.w),e.Y36(ue.m))},s.\u0275cmp=e.Xpm({type:s,selectors:[["worklenz-project-form-modal"]],viewQuery:function(t,n){if(1&t&&(e.Gf(pe,5),e.Gf(he,5),e.Gf(ge,5),e.Gf(fe,5)),2&t){let i;e.iGM(i=e.CRH())&&(n.projectName=i.first),e.iGM(i=e.CRH())&&(n.memberSearchInput=i.first),e.iGM(i=e.CRH())&&(n.projectManagerSelector=i.first),e.iGM(i=e.CRH())&&(n.outsideClicker=i.first)}},outputs:{onCreate:"onCreate",onUpdate:"onUpdate",onProjectManagerUpdate:"onProjectManagerUpdate",onDelete:"onDelete"},standalone:!0,features:[e.jDz],decls:3,vars:5,consts:[[3,"nzClosable","nzTitle","nzVisible","nzPlacement","nzOnClose","nzVisibleChange"],[4,"nzDrawerContent"],[3,"show","onCreateOrUpdate","showChange"],[3,"nzSpinning"],["class","mb-3",3,"nzType","nzMessage",4,"ngIf"],["nz-form","",3,"formGroup","nzLayout"],["nzRequired","",3,"nzSpan"],["nzErrorTip","Please enter a name!",3,"nzSpan"],["nz-input","","placeholder","Name",3,"formControlName"],["projectName",""],[4,"ngIf"],["nzRequired","",1,"pb-0",3,"nzSpan"],["nz-dropdown","",1,"ms-2","rounded-circle","cursor-pointer",2,"width","20px","height","20px",3,"nzColor","nzDropdownMenu","nzDisabled","nzTrigger"],["menu","nzDropdownMenu"],["nz-menu","","nzSelectable","",2,"max-height","200px","overflow","hidden","overflow-y","auto"],["nz-menu-item","",3,"click",4,"ngFor","ngForOf"],[3,"nzSpan"],[3,"formControlName","nzLoading"],["nzCustomContent","",3,"nzLabel","nzValue",4,"ngFor","ngForOf"],[3,"categoryId","disabled","categoryIdChange"],["nz-input","","placeholder","Notes",3,"formControlName"],[3,"name","nameChange",4,"ngIf"],["nz-dropdown","",3,"nzClickHide","nzDropdownMenu","nzTrigger","nzDisabled","nzVisibleChange"],[1,"d-flex","h-100","align-items-center","manager-input"],["projectManagerSelector",""],["nz-typography","","nzType","secondary",4,"ngIf"],["projectManagerDropDown","nzDropdownMenu"],["class","members-dropdown pt-0","nz-menu","",4,"ngIf"],["outsideClicker",""],[3,"nzSize"],["nz-row","",3,"nzGutter"],["nz-col","",3,"nzSpan"],[1,"w-100",3,"formControlName","nzDisabledDate","nzOnOpenChange"],["nzRequired","",1,"star-none",3,"nzSpan"],["nzErrorTip","Field cannot be empty!",3,"nzSpan"],["nz-input","","placeholder","Estimated Working Days",1,"w-100",3,"formControlName","nzMin","maxlength"],["nz-input","","placeholder","Estimated Man Days",1,"w-100",3,"formControlName","nzMin","maxlength"],["nz-input","","placeholder","Hours Per Day",1,"w-100",3,"formControlName","nzMin","nzMax","maxlength"],[1,"mb-3",3,"nzType","nzMessage"],["nz-input","","placeholder","Key",3,"formControlName","maxlength","keyup"],["nz-menu-item","",3,"click"],[1,"me-1","w-100","rounded-pill",2,"height","16px !important","width","16px !important",3,"nzColor"],["nzCustomContent","",3,"nzLabel","nzValue"],["nz-icon","",3,"nzType"],[3,"nzColor","nzText"],[3,"name","nameChange"],["nz-tooltip","",1,"mt-auto","mb-auto","mx-2",3,"nzSize","nzSrc","nzText","nzTooltipPlacement","nzTooltipTitle"],["nz-typography",""],["nz-typography","",1,"mx-2","remove-icon",3,"click"],["nz-icon","","nzType","close-circle","nzTheme","fill"],["nz-typography","","nzType","secondary"],[1,"avatar-dashed","mx-2","bg-white",3,"nzSize","nzIcon"],["nz-menu","",1,"members-dropdown","pt-0"],[1,"px-3","py-2","position-sticky","top-0","bg-white","z-top"],["nz-input","","placeholder","Search by name","type","text",1,"border-default-color","dropdown-search-input",3,"input"],["memberSearchInput",""],["class","m-0","nz-menu-item","",3,"nzDisabled","click",4,"ngFor","ngForOf","ngForTrackBy"],["nz-menu-item","",1,"m-0",3,"nzDisabled","click"],[1,"d-flex","align-items-center","justify-content-center","user-select-none"],["nz-tooltip","",1,"mt-auto","mb-auto","me-2",3,"nzSize","nzSrc","nzText","nzTooltipPlacement","nzTooltipTitle"],[2,"line-height","15px"],["nz-typography","",1,"d-block","mem-name"],["nz-typography","","nzType","danger",4,"ngIf"],["nz-typography","","nzType","danger"],["nz-button","","nzBlock","","type","button",3,"nzLoading","nzType","click"],["class","mt-2","nz-button","","nz-popconfirm","","nzDanger","","nzBlock","","type","button",3,"nzLoading","nzOkText","nzPopconfirmTitle","nzType","nzOnConfirm",4,"ngIf"],["nz-button","","nz-popconfirm","","nzDanger","","nzBlock","","type","button",1,"mt-2",3,"nzLoading","nzOkText","nzPopconfirmTitle","nzType","nzOnConfirm"],[1,"mt-3","mb-2"],[1,"pb-1"],["class","mb-0","nz-typography","","nzType","secondary",4,"ngIf"],["nz-typography","","nzType","secondary",1,"mb-0"],["nz-tooltip","",3,"nzTooltipPlacement","nzTooltipTitle"]],template:function(t,n){1&t&&(e.TgZ(0,"nz-drawer",0),e.NdJ("nzOnClose",function(){return n.handleClose()})("nzVisibleChange",function(M){return n.onVisibilityChange(M)}),e.YNc(1,Fe,86,71,"ng-container",1),e.qZA(),e.TgZ(2,"worklenz-team-members-form",2),e.NdJ("onCreateOrUpdate",function(){return n.getTeamMembers()})("showChange",function(M){return n.showTeamMemberModal=M}),e.qZA()),2&t&&(e.Q6J("nzClosable",!0)("nzTitle",n.title)("nzVisible",n.show)("nzPlacement","right"),e.xp6(2),e.Q6J("show",n.showTeamMemberModal))},dependencies:[f.LV,f.Ip,f.Vq,D.BL,D.Vz,D.SQ,v.X,v.j,l.j,l.W,w,o.UX,o._Y,o.Fj,o.JJ,o.JL,o.nD,o.sg,o.u,O.o7,O.Zp,O.gB,y.sL,y.ix,_e.w,de.dQ,j.O5,_._p,_.JW,d.U5,I.t3,I.SK,d.Lr,d.Nx,d.iK,d.Fd,j.sg,P.PV,P.Ls,m.S,p.Hb,p.uw,Z.b1,Y.wO,Y.r9,Z.cm,Z.RR,c.m,j.uU,u.d,C.cg,C.SY,E.ZJ,E.ZU,J.S,J.g,R.L,R.r,W.n,B.mS,B.x7,H.Zf,H._V,X.I,$.Rt,$.Dz,q.Wr,ee.g,o.u5],styles:[".remove-icon[_ngcontent-%COMP%]{color:#00000040;background:#fff;opacity:0;cursor:pointer;transition:.25s all}.remove-icon[_ngcontent-%COMP%]:hover{color:#00000073}.manager-input[_ngcontent-%COMP%]{border-width:1px;border-style:solid;border-color:transparent;border-radius:6px;transition:.25s all;margin-left:8px;min-height:32px}.manager-input[_ngcontent-%COMP%]:hover{border-color:#40a9ff}.manager-input[_ngcontent-%COMP%]:hover   .remove-icon[_ngcontent-%COMP%]{opacity:1}.manager-input.highlight[_ngcontent-%COMP%]{border-color:#40a9ff;box-shadow:0 0 0 2px #1890ff33}.z-top[_ngcontent-%COMP%]{z-index:1}"],changeDetection:0}),z})()},97192:(N,F,r)=>{r.d(F,{I:()=>o});var h=r(78645),e=r(65879);let o=(()=>{var x;class A{constructor(){this._createSbj$=new h.x}get onCreateInvoke(){return this._createSbj$.asObservable()}create(f){this._createSbj$.next(f)}}return(x=A).\u0275fac=function(f){return new(f||x)},x.\u0275prov=e.Yz7({token:x,factory:x.\u0275fac,providedIn:"root"}),A})()},99783:(N,F,r)=>{r.d(F,{Q:()=>g});var h=r(10708),e=r(26857),o=r(69649),x=r(65879),A=r(69862);let g=(()=>{var f;class D extends e.P{constructor(l){super(),this.http=l,this.root=`${this.API_BASE_URL}/clients`}create(l){return this._post(this.http,this.root,l)}get(l,d,T,P,j){const O=encodeURIComponent(j||"");return this._get(this.http,`${this.root}${(0,o.UK)({index:l,size:d,field:T,order:P,search:O})}`)}getById(l){return this._get(this.http,`${this.root}/${l}`)}update(l,d){return this._put(this.http,`${this.root}/${l}`,d)}delete(l){return(0,h.n)(this.http.delete(`${this.root}/${l}`))}}return(f=D).\u0275fac=function(l){return new(l||f)(x.LFG(A.eN))},f.\u0275prov=x.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"}),D})()},55012:(N,F,r)=>{r.d(F,{Y:()=>A});var h=r(26857),e=r(10708),o=r(65879),x=r(69862);let A=(()=>{var g;class f extends h.P{constructor(v){super(),this.http=v,this.root=`${this.API_BASE_URL}/projects-folders`}create(v){return this._post(this.http,this.root,v)}get(){return this._get(this.http,`${this.root}`)}getById(v){return this._get(this.http,`${this.root}/${v}`)}update(v,l){return this._put(this.http,`${this.root}/${v}`,l)}delete(v){return(0,e.n)(this.http.delete(`${this.root}/${v}`))}}return(g=f).\u0275fac=function(v){return new(v||g)(o.LFG(x.eN))},g.\u0275prov=o.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),f})()},31215:(N,F,r)=>{r.d(F,{U:()=>g});var h=r(26857),e=r(10708),o=r(69649),x=r(65879),A=r(69862);let g=(()=>{var f;class D extends h.P{constructor(l){super(),this.http=l,this.root=`${this.API_BASE_URL}/projects`}create(l){return this._post(this.http,this.root,l)}get(l,d,T,P,j,O=null){const S=encodeURIComponent(j||""),I=`${this.root}${(0,o.UK)({index:l,size:d,field:T,order:P,search:S,filter:O})}`;return this._get(this.http,I)}getByConfig(l){l.search=encodeURIComponent(l.search||"");const d=`${this.root}${(0,o.UK)(l)}`;return this._get(this.http,d)}updateDefaultView(l,d){let T="TASK_LIST";return 1===d&&(T="BOARD"),this._put(this.http,`${this.root}/update-pinned-view`,{project_id:l,default_view:T})}getMyProjectsToTasks(){return this._get(this.http,`${this.root}/my-task-projects`)}getMyProjects(l,d,T,P,j,O=null){const S=encodeURIComponent(j||""),I=`${this.root}/my-projects${(0,o.UK)({index:l,size:d,field:T,order:P,search:S,filter:O})}`;return this._get(this.http,I)}getAllTasks(l,d,T,P,j,O=null){const S=encodeURIComponent(j||""),I=`${this.root}/tasks${(0,o.UK)({index:l,size:d,field:T,order:P,search:S,filter:O})}`;return this._get(this.http,I)}getMembers(l,d,T,P,j,O){const S=encodeURIComponent(O||""),I=`${this.root}/members/${l}${(0,o.UK)({index:d,size:T,field:P,order:j,search:S})}`;return this._get(this.http,I)}getById(l){return this._get(this.http,`${this.root}/${l}`)}getProjectManager(l){return this._get(this.http,`${this.root}/project-manager/${l}`)}update(l,d){const T=(0,o.UK)({current_project_id:l});return this._put(this.http,`${this.root}/${l}${T}`,d)}delete(l){return(0,e.n)(this.http.delete(`${this.root}/${l}`))}getOverViewById(l){return this._get(this.http,`${this.root}/overview/${l}`)}getOverViewMembersById(l,d){return this._get(this.http,`${this.root}/overview-members/${l}?archived=${d}`)}getAll(){return this._get(this.http,`${this.root}/all`)}toggleFavorite(l){return this._get(this.http,`${this.root}/favorite/${l}`)}toggleArchive(l){return this._get(this.http,`${this.root}/archive/${l}`)}toggleArchiveAll(l){return this._get(this.http,`${this.root}/archive-all/${l}`)}}return(f=D).\u0275fac=function(l){return new(l||f)(x.LFG(A.eN))},f.\u0275prov=x.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"}),D})()},98421:(N,F,r)=>{r.d(F,{Ju:()=>_,sn:()=>y});var h=r(97582),e=r(36028),o=r(65879),x=r(60095),A=r(92438),g=r(59773),f=r(40874),D=r(99087),v=r(27754),l=r(49388),d=r(96814),T=r(96109),P=r(62595);const j=["nz-rate-item",""];function O(m,p){}function S(m,p){}function I(m,p){1&m&&o._UZ(0,"span",4)}const Q=function(m){return{$implicit:m}},k=["ulElement"];function L(m,p){if(1&m){const Z=o.EpF();o.TgZ(0,"li",3)(1,"div",4),o.NdJ("itemHover",function(u){const E=o.CHM(Z).index,J=o.oxw();return o.KtG(J.onItemHover(E,u))})("itemClick",function(u){const E=o.CHM(Z).index,J=o.oxw();return o.KtG(J.onItemClick(E,u))}),o.qZA()()}if(2&m){const Z=p.index,c=o.oxw();o.Q6J("ngClass",c.starStyleArray[Z]||"")("nzTooltipTitle",c.nzTooltips[Z]),o.xp6(1),o.Q6J("allowHalf",c.nzAllowHalf)("character",c.nzCharacter)("index",Z)}}let b=(()=>{var m;class p{constructor(){this.index=0,this.allowHalf=!1,this.itemHover=new o.vpe,this.itemClick=new o.vpe}hoverRate(c){this.itemHover.next(c&&this.allowHalf)}clickRate(c){this.itemClick.next(c&&this.allowHalf)}}return(m=p).\u0275fac=function(c){return new(c||m)},m.\u0275cmp=o.Xpm({type:m,selectors:[["","nz-rate-item",""]],inputs:{character:"character",index:"index",allowHalf:"allowHalf"},outputs:{itemHover:"itemHover",itemClick:"itemClick"},exportAs:["nzRateItem"],attrs:j,decls:6,vars:8,consts:[[1,"ant-rate-star-second",3,"mouseover","click"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"ant-rate-star-first",3,"mouseover","click"],["defaultCharacter",""],["nz-icon","","nzType","star","nzTheme","fill"]],template:function(c,u){if(1&c&&(o.TgZ(0,"div",0),o.NdJ("mouseover",function(E){return u.hoverRate(!1),E.stopPropagation()})("click",function(){return u.clickRate(!1)}),o.YNc(1,O,0,0,"ng-template",1),o.qZA(),o.TgZ(2,"div",2),o.NdJ("mouseover",function(E){return u.hoverRate(!0),E.stopPropagation()})("click",function(){return u.clickRate(!0)}),o.YNc(3,S,0,0,"ng-template",1),o.qZA(),o.YNc(4,I,1,0,"ng-template",null,3,o.W1O)),2&c){const C=o.MAs(5);o.xp6(1),o.Q6J("ngTemplateOutlet",u.character||C)("ngTemplateOutletContext",o.VKq(4,Q,u.index)),o.xp6(2),o.Q6J("ngTemplateOutlet",u.character||C)("ngTemplateOutletContext",o.VKq(6,Q,u.index))}},dependencies:[d.tP,P.Ls],encapsulation:2,changeDetection:0}),(0,h.gn)([(0,v.yF)()],p.prototype,"allowHalf",void 0),p})();const w="rate";let y=(()=>{var m;class p{get nzValue(){return this._value}set nzValue(c){this._value!==c&&(this._value=c,this.hasHalf=!Number.isInteger(c),this.hoverValue=Math.ceil(c))}constructor(c,u,C,E,J,R){this.nzConfigService=c,this.ngZone=u,this.renderer=C,this.cdr=E,this.directionality=J,this.destroy$=R,this._nzModuleName=w,this.nzAllowClear=!0,this.nzAllowHalf=!1,this.nzDisabled=!1,this.nzAutoFocus=!1,this.nzCount=5,this.nzTooltips=[],this.nzOnBlur=new o.vpe,this.nzOnFocus=new o.vpe,this.nzOnHoverChange=new o.vpe,this.nzOnKeyDown=new o.vpe,this.classMap={},this.starArray=[],this.starStyleArray=[],this.dir="ltr",this.hasHalf=!1,this.hoverValue=0,this.isFocused=!1,this._value=0,this.isNzDisableFirstChange=!0,this.onChange=()=>null,this.onTouched=()=>null}ngOnChanges(c){const{nzAutoFocus:u,nzCount:C,nzValue:E}=c;if(u&&!u.isFirstChange()){const J=this.ulElement.nativeElement;this.nzAutoFocus&&!this.nzDisabled?this.renderer.setAttribute(J,"autofocus","autofocus"):this.renderer.removeAttribute(J,"autofocus")}C&&this.updateStarArray(),E&&this.updateStarStyle()}ngOnInit(){this.nzConfigService.getConfigChangeEventForComponent(w).pipe((0,g.R)(this.destroy$)).subscribe(()=>this.cdr.markForCheck()),this.directionality.change.pipe((0,g.R)(this.destroy$)).subscribe(c=>{this.dir=c,this.cdr.detectChanges()}),this.dir=this.directionality.value,this.ngZone.runOutsideAngular(()=>{(0,A.R)(this.ulElement.nativeElement,"focus").pipe((0,g.R)(this.destroy$)).subscribe(c=>{this.isFocused=!0,this.nzOnFocus.observers.length&&this.ngZone.run(()=>this.nzOnFocus.emit(c))}),(0,A.R)(this.ulElement.nativeElement,"blur").pipe((0,g.R)(this.destroy$)).subscribe(c=>{this.isFocused=!1,this.nzOnBlur.observers.length&&this.ngZone.run(()=>this.nzOnBlur.emit(c))})})}onItemClick(c,u){if(this.nzDisabled)return;this.hoverValue=c+1;const C=u?c+.5:c+1;this.nzValue===C?this.nzAllowClear&&(this.nzValue=0,this.onChange(this.nzValue)):(this.nzValue=C,this.onChange(this.nzValue)),this.updateStarStyle()}onItemHover(c,u){this.nzDisabled||this.hoverValue===c+1&&u===this.hasHalf||(this.hoverValue=c+1,this.hasHalf=u,this.nzOnHoverChange.emit(this.hoverValue),this.updateStarStyle())}onRateLeave(){this.hasHalf=!Number.isInteger(this.nzValue),this.hoverValue=Math.ceil(this.nzValue),this.updateStarStyle()}focus(){this.ulElement.nativeElement.focus()}blur(){this.ulElement.nativeElement.blur()}onKeyDown(c){const u=this.nzValue;c.keyCode===e.SV&&this.nzValue<this.nzCount?this.nzValue+=this.nzAllowHalf?.5:1:c.keyCode===e.oh&&this.nzValue>0&&(this.nzValue-=this.nzAllowHalf?.5:1),u!==this.nzValue&&(this.onChange(this.nzValue),this.nzOnKeyDown.emit(c),this.updateStarStyle(),this.cdr.markForCheck())}updateStarArray(){this.starArray=Array(this.nzCount).fill(0).map((c,u)=>u),this.updateStarStyle()}updateStarStyle(){this.starStyleArray=this.starArray.map(c=>{const u="ant-rate-star",C=c+1;return{[`${u}-full`]:C<this.hoverValue||!this.hasHalf&&C===this.hoverValue,[`${u}-half`]:this.hasHalf&&C===this.hoverValue,[`${u}-active`]:this.hasHalf&&C===this.hoverValue,[`${u}-zero`]:C>this.hoverValue,[`${u}-focused`]:this.hasHalf&&C===this.hoverValue&&this.isFocused}})}writeValue(c){this.nzValue=c||0,this.updateStarArray(),this.cdr.markForCheck()}setDisabledState(c){this.nzDisabled=this.isNzDisableFirstChange&&this.nzDisabled||c,this.isNzDisableFirstChange=!1,this.cdr.markForCheck()}registerOnChange(c){this.onChange=c}registerOnTouched(c){this.onTouched=c}}return(m=p).\u0275fac=function(c){return new(c||m)(o.Y36(f.jY),o.Y36(o.R0b),o.Y36(o.Qsj),o.Y36(o.sBO),o.Y36(l.Is,8),o.Y36(D.kn))},m.\u0275cmp=o.Xpm({type:m,selectors:[["nz-rate"]],viewQuery:function(c,u){if(1&c&&o.Gf(k,7),2&c){let C;o.iGM(C=o.CRH())&&(u.ulElement=C.first)}},inputs:{nzAllowClear:"nzAllowClear",nzAllowHalf:"nzAllowHalf",nzDisabled:"nzDisabled",nzAutoFocus:"nzAutoFocus",nzCharacter:"nzCharacter",nzCount:"nzCount",nzTooltips:"nzTooltips"},outputs:{nzOnBlur:"nzOnBlur",nzOnFocus:"nzOnFocus",nzOnHoverChange:"nzOnHoverChange",nzOnKeyDown:"nzOnKeyDown"},exportAs:["nzRate"],features:[o._Bn([D.kn,{provide:x.JU,useExisting:(0,o.Gpc)(()=>m),multi:!0}]),o.TTD],decls:3,vars:7,consts:[[1,"ant-rate",3,"ngClass","tabindex","keydown","mouseleave"],["ulElement",""],["class","ant-rate-star","nz-tooltip","",3,"ngClass","nzTooltipTitle",4,"ngFor","ngForOf"],["nz-tooltip","",1,"ant-rate-star",3,"ngClass","nzTooltipTitle"],["nz-rate-item","",3,"allowHalf","character","index","itemHover","itemClick"]],template:function(c,u){1&c&&(o.TgZ(0,"ul",0,1),o.NdJ("keydown",function(E){return u.onKeyDown(E),E.preventDefault()})("mouseleave",function(E){return u.onRateLeave(),E.stopPropagation()}),o.YNc(2,L,2,5,"li",2),o.qZA()),2&c&&(o.ekj("ant-rate-disabled",u.nzDisabled)("ant-rate-rtl","rtl"===u.dir),o.Q6J("ngClass",u.classMap)("tabindex",u.nzDisabled?-1:1),o.xp6(2),o.Q6J("ngForOf",u.starArray))},dependencies:[d.mk,d.sg,T.SY,b],encapsulation:2,changeDetection:0}),(0,h.gn)([(0,f.oS)(),(0,v.yF)()],p.prototype,"nzAllowClear",void 0),(0,h.gn)([(0,f.oS)(),(0,v.yF)()],p.prototype,"nzAllowHalf",void 0),(0,h.gn)([(0,v.yF)()],p.prototype,"nzDisabled",void 0),(0,h.gn)([(0,v.yF)()],p.prototype,"nzAutoFocus",void 0),(0,h.gn)([(0,v.Rn)()],p.prototype,"nzCount",void 0),p})(),_=(()=>{var m;class p{}return(m=p).\u0275fac=function(c){return new(c||m)},m.\u0275mod=o.oAB({type:m}),m.\u0275inj=o.cJS({imports:[l.vT,d.ez,P.PV,T.cg]}),p})()}}]);